<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.8149e77b5eb71b2d2a57.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}main{display:block}h1{font-size:2em;margin:.67em 0}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{-webkit-box-sizing:border-box;box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#a0aec0}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@font-face{font-family:Fira Code;src:url(/FiraCode-Light.woff2) format("woff2"),url(/FiraCode-Light.woff) format("woff");font-weight:300;font-style:normal}@font-face{font-family:Fira Code;src:url(/FiraCode-Regular.woff2) format("woff2"),url(/FiraCode-Regular.woff) format("woff");font-weight:400;font-style:normal}@font-face{font-family:Fira Code;src:url(/FiraCode-Medium.woff2) format("woff2"),url(/FiraCode-Medium.woff) format("woff");font-weight:500;font-style:normal}@font-face{font-family:Fira Code;src:url(/FiraCode-SemiBold.woff2) format("woff2"),url(/FiraCode-SemiBold.woff) format("woff");font-weight:600;font-style:normal}@font-face{font-family:Fira Code;src:url(/FiraCode-Bold.woff2) format("woff2"),url(/FiraCode-Bold.woff) format("woff");font-weight:700;font-style:normal}@font-face{font-family:Fira Code VF;src:url(/FiraCode-VF.woff2) format("woff2-variations"),url(/FiraCode-VF.woff) format("woff-variations");font-weight:300 700;font-style:normal}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:1.125rem;line-height:1.5;letter-spacing:.025em;--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity));background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity))}.navbar,body{--bg-opacity:1}.navbar{background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}code,pre{font-weight:400;letter-spacing:0;font-family:Fira Code!important;border:none!important}.avatar{border-width:2px;--border-opacity:1;border-color:#f7fafc;border-color:rgba(247,250,252,var(--border-opacity));border-radius:9999px;-webkit-box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.button{padding:.5rem .75rem;font-weight:500;--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity));text-decoration:none;background-color:#a0aec0;background-color:rgba(160,174,192,var(--bg-opacity));border-color:#718096;border-color:rgba(113,128,150,var(--border-opacity));border-radius:.25rem;-webkit-box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-property:background-color,border-color,color,fill,stroke;transition-property:background-color,border-color,color,fill,stroke}.button,.button.disabled{--bg-opacity:1;--border-opacity:1}.button.disabled{background-color:#718096;background-color:rgba(113,128,150,var(--bg-opacity));border-color:#4a5568;border-color:rgba(74,85,104,var(--border-opacity));cursor:default}.button:hover{--bg-opacity:1;background-color:#718096;background-color:rgba(113,128,150,var(--bg-opacity));--border-opacity:1;border-color:#4a5568;border-color:rgba(74,85,104,var(--border-opacity))}.button:focus{--bg-opacity:1;background-color:#718096;background-color:rgba(113,128,150,var(--bg-opacity));--border-opacity:1;border-color:#4a5568;border-color:rgba(74,85,104,var(--border-opacity))}.post-container{--border-opacity:1;border-color:#4a5568;border-bottom:2px;border-style:dotted;border-color:rgba(74,85,104,var(--border-opacity))}.link{font-weight:500;--text-opacity:1;color:#9b2c2c;color:rgba(155,44,44,var(--text-opacity));text-decoration:none;-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-property:background-color,border-color,color,fill,stroke;transition-property:background-color,border-color,color,fill,stroke}.link:visited{--text-opacity:1;color:#553c9a;color:rgba(85,60,154,var(--text-opacity))}.link:hover{--text-opacity:1;color:#9b2c2c;color:rgba(155,44,44,var(--text-opacity));border-bottom-width:1px;--border-opacity:1;border-color:#38b2ac;border-color:rgba(56,178,172,var(--border-opacity))}h1.post-content:before,h1.post-header:before,h2.post-content:before,h2.post-header:before,h3.post-content:before,h3.post-header:before,h4.post-content:before,h4.post-header:before,h5.post-content:before,h5.post-header:before,h6.post-content:before,h6.post-header:before{--text-opacity:1;color:#cbd5e0;color:rgba(203,213,224,var(--text-opacity))}h1.post-content:before,h1.post-header:before{margin-right:1rem;content:"#"}h2.post-content:before,h2.post-header:before{margin-right:.75rem;content:"##"}h3.post-content:before,h3.post-header:before{margin-right:.5rem;content:"###"}h4.post-content:before,h4.post-header:before,h5.post-content:before,h5.post-header:before,h6.post-content:before,h6.post-header:before{margin-right:.25rem;content:"####"}.blog-post h1{font-weight:600;font-size:2.25rem}.blog-post h2{font-weight:600;font-size:1.875rem}.blog-post h3{font-weight:600;font-size:1.5rem}.blog-post h4,.blog-post h5{font-weight:600;font-size:1.25rem}.blog-post h6{font-weight:600;font-size:1.125rem}.post-content blockquote{padding-left:1.5rem;border-left-width:4px;--border-opacity:1;border-color:#9f7aea;border-color:rgba(159,122,234,var(--border-opacity))}.post-content p{margin-top:1rem;margin-bottom:1rem}.post-content ul{list-style-type:disc}.post-content ol,.post-content ul{margin-left:1rem;padding-left:1rem}.post-content ol{list-style-type:decimal}.post-content li{margin-top:.5rem;margin-bottom:.5rem}.post-content strong{font-weight:600}.post-content a{--text-opacity:1;color:#9b2c2c;color:rgba(155,44,44,var(--text-opacity));text-decoration:none;-webkit-transition-property:background-color,border-color,color,fill,stroke;transition-property:background-color,border-color,color,fill,stroke;-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1)}.post-content a:focus{--text-opacity:1;color:#9b2c2c;color:rgba(155,44,44,var(--text-opacity))}.post-content a:visited{--text-opacity:1;color:#553c9a;color:rgba(85,60,154,var(--text-opacity))}.post-content a:hover{--text-opacity:1;color:#9b2c2c;color:rgba(155,44,44,var(--text-opacity));border-bottom-width:1px;--border-opacity:1;border-color:#38b2ac;border-color:rgba(56,178,172,var(--border-opacity));text-decoration:none}.post-content a.gatsby-resp-image-link:hover{border-width:0}@media (prefers-color-scheme:dark){body{background-color:#1a202c;background-color:rgba(26,32,44,var(--bg-opacity));--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.navbar,body{--bg-opacity:1}.navbar{background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity));--bg-opacity:0.25}.avatar{--border-opacity:1;border-color:#2d3748;border-color:rgba(45,55,72,var(--border-opacity))}.button{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity));background-color:#718096;background-color:rgba(113,128,150,var(--bg-opacity));border-color:#a0aec0;border-color:rgba(160,174,192,var(--border-opacity))}.button,.button.disabled{--bg-opacity:1;--border-opacity:1}.button.disabled{background-color:#a0aec0;background-color:rgba(160,174,192,var(--bg-opacity));border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.button:hover{--bg-opacity:1;background-color:#a0aec0;background-color:rgba(160,174,192,var(--bg-opacity));--border-opacity:1;border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.button:focus{--bg-opacity:1;background-color:#a0aec0;background-color:rgba(160,174,192,var(--bg-opacity));--border-opacity:1;border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.post-content a{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity))}.post-content a:focus{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity))}.post-content a:visited{--text-opacity:1;color:#e9d8fd;color:rgba(233,216,253,var(--text-opacity))}.post-content a:hover{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity))}.link{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity))}.link:visited{--text-opacity:1;color:#e9d8fd;color:rgba(233,216,253,var(--text-opacity))}.link:hover{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity));--border-opacity:1;border-color:#38b2ac;border-color:rgba(56,178,172,var(--border-opacity))}}.space-x-1>:not(template)~:not(template){--space-x-reverse:0;margin-right:calc(0.25rem*var(--space-x-reverse));margin-left:calc(0.25rem*(1 - var(--space-x-reverse)))}.space-y-4>:not(template)~:not(template){--space-y-reverse:0;margin-top:calc(1rem*(1 - var(--space-y-reverse)));margin-bottom:calc(1rem*var(--space-y-reverse))}.space-x-4>:not(template)~:not(template){--space-x-reverse:0;margin-right:calc(1rem*var(--space-x-reverse));margin-left:calc(1rem*(1 - var(--space-x-reverse)))}.block{display:block}.flex{display:-webkit-box;display:-ms-flexbox;display:flex}.inline-flex{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.hidden{display:none}.flex-col{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.flex-wrap{-ms-flex-wrap:wrap;flex-wrap:wrap}.items-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.flex-1{-webkit-box-flex:1;-ms-flex:1 1 0%;flex:1 1 0%}.flex-shrink-0{-ms-flex-negative:0;flex-shrink:0}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-3{height:.75rem}.h-6{height:1.5rem}.h-8{height:2rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-lg{font-size:1.125rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.leading-6{line-height:1.5rem}.leading-normal{line-height:1.5}.list-disc{list-style-type:disc}.m-auto{margin:auto}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mt-0{margin-top:0}.ml-0{margin-left:0}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.ml-2{margin-left:.5rem}.mt-4{margin-top:1rem}.mr-4{margin-right:1rem}.mb-4{margin-bottom:1rem}.mb-8{margin-bottom:2rem}.max-w-3xl{max-width:48rem}.p-2{padding:.5rem}.p-4{padding:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-3{padding-left:.75rem;padding-right:.75rem}.pl-4{padding-left:1rem}.pb-10{padding-bottom:2.5rem}.shadow-md{-webkit-box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.fill-current{fill:currentColor}.no-underline{text-decoration:none}.tracking-wider{letter-spacing:.05em}.align-middle{vertical-align:middle}.w-3{width:.75rem}.w-6{width:1.5rem}.w-16{width:4rem}.w-full{width:100%}@media (min-width:768px){.md\:font-extrabold{font-weight:800}.md\:text-4xl{font-size:2.25rem}.md\:ml-4{margin-left:1rem}.md\:w-24{width:6rem}}@media (min-width:1024px){.lg\:inline-block{display:inline-block}.lg\:flex{display:-webkit-box;display:-ms-flexbox;display:flex}.lg\:hidden{display:none}.lg\:items-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.lg\:mt-0{margin-top:0}.lg\:w-32{width:8rem}.lg\:w-auto{width:auto}.lg\:w-1\/2{width:50%}}.grvsc-container{overflow:auto;position:relative;-webkit-overflow-scrolling:touch;padding-top:1rem;padding-top:var(--grvsc-padding-top,var(--grvsc-padding-v,1rem));padding-bottom:1rem;padding-bottom:var(--grvsc-padding-bottom,var(--grvsc-padding-v,1rem));border-radius:8px;border-radius:var(--grvsc-border-radius,8px);-webkit-font-feature-settings:normal;font-feature-settings:normal;line-height:1.4}.grvsc-code{display:table}.grvsc-line{display:table-row;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;position:relative}.grvsc-line>*{position:relative}.grvsc-gutter-pad{display:table-cell;padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem))/2)}.grvsc-gutter{display:table-cell;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.grvsc-gutter:before{content:attr(data-content)}.grvsc-source{display:table-cell;padding-left:1.5rem;padding-left:var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem));padding-right:1.5rem;padding-right:var(--grvsc-padding-right,var(--grvsc-padding-h,1.5rem))}.grvsc-source:empty:after{content:" ";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.grvsc-gutter+.grvsc-source{padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem))/2)}.grvsc-has-line-highlighting>.grvsc-code>.grvsc-line:before{content:" ";position:absolute;width:100%}.grvsc-line-diff-add:before{background-color:rgba(0,255,60,.2);background-color:var(--grvsc-line-diff-add-background-color,rgba(0,255,60,.2))}.grvsc-line-diff-del:before{background-color:rgba(255,0,20,.2);background-color:var(--grvsc-line-diff-del-background-color,rgba(255,0,20,.2))}.grvsc-line-number{padding:0 2px;text-align:right;opacity:.7}</style><meta name="generator" content="Gatsby 2.20.9"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-9152758-1', 'auto', {});
      
      
      
      
      
      }</script><link rel="alternate" type="application/rss+xml" title="David Bernheisel&#x27;s Blog RSS Feed" href="/rss.xml"/><link rel="icon" href="/android-chrome-36x36.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="36x36" href="/android-chrome-36x36.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="48x48" href="/android-chrome-48x48.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="72x72" href="/android-chrome-72x72.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="96x96" href="/android-chrome-96x96.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="144x144" href="/android-chrome-144x144.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png?v=611230f76b9c00b58e5b99e8a179a99d"/><title data-react-helmet="true">Phoenix LiveView and Views | David Bernheisel</title><meta data-react-helmet="true" name="description" content="I’ve written a couple LiveView applications now, Elixir Regex Tester A request logger, much like Phoenix Live Dashboard’s An internal…"/><link as="script" rel="preload" href="/styles-48fa8a050a65bb8447bd.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-f37877f27548564a00ab.js"/><link as="script" rel="preload" href="/1777bc0a756dace6068a54d243c7071eee1627a0-c8bbedbe2105888d6327.js"/><link as="script" rel="preload" href="/framework-1cbcc4f69858806ac5db.js"/><link as="script" rel="preload" href="/app-e49f8733b8aee9471acf.js"/><link as="script" rel="preload" href="/webpack-runtime-b88e2e84f842e50b7923.js"/><link as="fetch" rel="preload" href="/page-data/blog/phoenix-liveview-and-views/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><nav class="flex flex-wrap items-center justify-between p-4 shadow-md navbar"><a class="no-underline" href="/"><div class="flex items-center space-x-1"><div class="flex-shrink-0"><img src="/static/profile-picture-977b63cbce04bae4479e3185b22bfb1a.jpg" alt="David Bernheisel" class="w-16 avatar md:w-24 lg:w-32"/></div><div><h3 class="ml-0 text-xl font-bold md:ml-4 md:text-4xl md:font-extrabold leading-6">David Bernheisel</h3></div></div></a><div class="block lg:hidden"><button class="flex items-center px-3 button"><svg class="w-3 h-3 fill-current" viewBox="0 0 20 20"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></button></div><div class="w-full block lg:mt-0 mt-4 lg:flex lg:items-center lg:w-auto hidden"><a class="no-underline block lg:inline-block mt-4 mr-4 lg:mt-0 button" href="/">Blog</a><a class="no-underline block lg:inline-block mt-4 mr-4 lg:mt-0 button" href="/projects/">Projects</a><a class="block mt-4 mr-4 button lg:inline-block lg:mt-0" href="https://elixir-utilities.herokuapp.com">Utilities</a><a class="block mt-4 mr-4 button lg:inline-block lg:mt-0" href="https://twitter.com/bernheisel">Twitter</a><div class="py-1 mt-4 lg:mt-0"><a href="/rss.xml"><img class="h-8 align-middle" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgaWQ9IlJTU2ljb24iCiAgICAgdmlld0JveD0iMCAwIDggOCIgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyNTYiPgoKICA8dGl0bGU+UlNTIGZlZWQgaWNvbjwvdGl0bGU+CgogIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CiAgICAuYnV0dG9uIHtzdHJva2U6IG5vbmU7IGZpbGw6IG9yYW5nZTt9CiAgICAuc3ltYm9sIHtzdHJva2U6IG5vbmU7IGZpbGw6IHdoaXRlO30KICA8L3N0eWxlPgoKICA8cmVjdCAgIGNsYXNzPSJidXR0b24iIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIHJ4PSIxLjUiIC8+CiAgPGNpcmNsZSBjbGFzcz0ic3ltYm9sIiBjeD0iMiIgY3k9IjYiIHI9IjEiIC8+CiAgPHBhdGggICBjbGFzcz0ic3ltYm9sIiBkPSJtIDEsNCBhIDMsMyAwIDAgMSAzLDMgaCAxIGEgNCw0IDAgMCAwIC00LC00IHoiIC8+CiAgPHBhdGggICBjbGFzcz0ic3ltYm9sIiBkPSJtIDEsMiBhIDUsNSAwIDAgMSA1LDUgaCAxIGEgNiw2IDAgMCAwIC02LC02IHoiIC8+Cgo8L3N2Zz4=" alt="RSS"/></a></div></div></nav><main class="max-w-3xl p-4 m-auto text-lg"><article class="blog-post"><h1 class="post-content text-3xl">Phoenix LiveView and Views</h1><p class="mt-2 mb-4 text-sm frontmatter"><span>Published on <!-- -->June 29, 2020</span><span><span class="mx-2">|</span>13<!-- -->m read</span></p><div class="post-content"><p>I’ve written a couple LiveView applications now,</p>
<ol>
<li><a href="https://elixir-utilities.herokuapp.com">Elixir Regex Tester</a></li>
<li>A request logger, much like <a href="https://github.com/phoenixframework/phoenix_live_dashboard">Phoenix Live Dashboard</a>’s</li>
<li>An internal webmail server, for me to receive and send email through
SendGrid. I hope to open-source this soon when it’s ready.</li>
<li>Another private work-related project.</li>
</ol>
<p>Everytime I build one, I learn something new and find a new pattern, and some
concept finally <em>clicks</em>. Today, that concept that cemented in my mind is how
Phoenix and Phoenix LiveView renders templates.</p>
<p>I want to show you a couple different View-rendering strategies. This should
help you decide which strategy to use.</p>
<p>All of these strategies work, this is purely about opinionated code organizing,
<em>but who doesn’t love reading opinions</em>? Plus we’ll learn how the views are
rendered.</p>
<h2>TLDR</h2>
<p>Glossary of examples:</p>
<ol>
<li><code>MyLive</code> = The LiveView module</li>
<li><code>MyView</code> = The standard Phoenix View module, not a LiveView.</li>
<li><code>my_live.html.leex</code> = The template rendered by <code>MyLive</code> or <code>MyView</code></li>
<li>This is written in context of Phoenix LiveView 0.13.3</li>
</ol>
<p><strong>If you have a simple LiveView</strong>, then you can implement <code>render(assigns)</code>
and inline your html with the <code>~L</code> sigil. No <code>my_live.html.leex</code> file needed.</p>
<p><strong>If you have a LiveView with lots of HTML</strong>, then you should use the standard
LiveView placement, and put your <code>my_live.ex</code> and <code>my_live.html.leex</code> next to
each other under <code>lib/my_app_web/live</code>. You don’t need to define <code>render/1</code>
because the default will work. Omit it.</p>
<p><strong>If you have a LiveView with lots of HTML helper functions</strong> that you want to
separate from business logic in the LiveView:</p>
<ol>
<li>Add your own standard Phoenix view <code>MyView</code> (or a better name).</li>
<li>Move your <code>my_live.html.leex</code> file to the standard Phoenix locations (ie,
<code>lib/my_app_web/templates/my</code>).</li>
<li>Implement your own <code>render(assigns)</code> that calls
<code>MyAppWeb.MyView.render("my_live.html", assigns)</code>. Phoenix LiveView will
still work; just remember to keep the html file named with an <code>.html.leex</code>
extension so the LiveView rendering engine kicks in.</li>
</ol>
<p><strong>Remember that you can create shared Views</strong>. Alternatively to above, if your
helpers are used across multiple views and generic, you can create a plain
module that encapsulates your HTML helpers. I usually call mine <code>ComponentView</code>
and use it inside my any of my templates, for example:
<code>Component.primary_button("My Link", to: "yadayada")</code>.</p>
<p><strong>If you want to use a regular View, but co-locate the template to the LiveView module</strong>,
as in you don’t want to go back to the vanilla Phoenix file structure but still
need a separate <code>MyView</code> for your HTML helpers, you can specify the root
folder and path to look in when creating your <code>MyView</code> by supplying an option:
<code>use Phoenix.View, root: "lib/my_app_web/live", path: ""</code>. This is <a href="https://hexdocs.pm/phoenix/Phoenix.View.html#__using__/1-options">explained in the
<code>Phoenix.View</code>
docs</a>. This
can be wrapped up into a convenience macro though. Read on for more info.</p>
<p><strong>This totally ignores LiveComponent</strong> as an option. If your LiveView can be
broken up into interactive components, then breaking out into a LiveComponent is
a good option to look into and works just like a LiveView. For the purpose of
this post and exploring how rendering works, we’re going to treat LiveComponents
the same as a LiveView.</p>
<h2>ToC</h2>
<ul>
<li><a href="#default-phoenix">Phoenix Controller/View/Template</a></li>
<li><a href="#default-liveview">Phoenix LiveView with a template Part 1</a></li>
<li><a href="#pluggy-controllers">Pluggy Controllers</a></li>
<li><a href="#default-liveview">Phoenix LiveView with a template Part 2</a></li>
<li><a href="#liveview-inline">Phoenix LiveView with an inline template</a></li>
<li><a href="#liveview-external">Phoenix LiveView with an external template</a></li>
</ul>
<p><a name="default-phoenix"></a></p>
<h2>Default Phoenix Controller/View/Template</h2>
<p>First, to remember where we came from, I want to show a standard Phoenix
Controller/View/Template pattern. There are several modules involved that the
<code>Plug.Conn</code> travels through in order to turn into a response for the end-user.</p>
<ol>
<li>Incoming request via <code>:cowboy</code></li>
<li>Endpoint</li>
<li>Router</li>
<li>Controller</li>
<li>View</li>
<li>Template (not a module)</li>
<li>Outgoing response via <code>:cowboy</code></li>
</ol>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### Router - lib/my_app_web/router.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.Router</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:router</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ...snip...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  scope </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;/&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    pipe_through </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:browser</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    get </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;/&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">PageController</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:home</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ...snip...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### Controller - lib/my_app_web/controllers/page_controller.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.PageController</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">#&lt;-- injects some logic to handle receiving</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># the conn and passing the conn on to cowboy</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">home</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">conn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_params</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    render(conn, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;home.html&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### View - lib/my_app_web/views/page_view.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.PageView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:view</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">#&lt;-- injects some logic to handle evaluating</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># the embedded elixir in your templates</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="html" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">&lt;!-- Template - lib/my_app_web/templates/page/home.html.eex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">We&#39;re going to ignore the layout stuff for now. Just know that it&#39;s</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">also evaluated and this template is a part of it --&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&lt;</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-7">p</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&gt;Yo! You&#39;re rendering the home page&lt;/</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-7">p</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&gt;</span></span></span></code></pre>
<p>In my mind, the template is the end of the show, though that’s not technically
correct; the real <strong>end of the line is the controller</strong>. The controller is using
the view module to evaluate the HTML and puts the result into the Plug.Conn’s
<code>resp_body</code>. The controller terminates the flow and the
once-a-request-and-now-a-response <code>Plug.Conn</code> is returned to the to the
underlying web server, which is probably cowboy, which delivers the payload to
the end-user through the HTTP connection.</p>
<p><a name="default-liveview"></a></p>
<h2>Default Phoenix LiveView without <code>render/1</code></h2>
<p>We’re here to learn about LiveView though, so let’s see an example of a LiveView
without a <code>render/1</code> function.</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### lib/my_app_web/live/my_live.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.MyLive</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:live_view</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@impl</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">LiveView</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">mount</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_params</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_session</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">socket</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># do stuff</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, socket}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="html" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">&lt;!-- lib/my_app_web/live/my_live.html.leex --&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&lt;</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-7">p</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&gt;Yo! I&#39;m rendered by a LiveView&lt;/</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-7">p</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&gt;</span></span></span></code></pre>
<p>Ok, without a controller, how does a given Phoenix LiveView handle the request?
Here’s a secret: <strong>a LiveView is also an ordinary controller</strong>.</p>
<p>Now… we may not use it like an ordinary Phoenix controller, but the request is
firstly handled like an ordinary web request; one with a Plug.Conn and a full
HTML response back to the user. The LiveView spices are garnished <em>after</em> the
HTML is delivered to the user and a new websocket is initiated to the server to
manage updates to it.</p>
<p>Or, as said in the LiveView docs:</p>
<blockquote>
<p>A LiveView begins as a regular HTTP request and HTML response,
and then upgrades to a stateful view on client connect,
guaranteeing a regular HTML page even if JavaScript is disabled.
Any time a stateful view changes or updates its socket assigns, it is
automatically re-rendered and the updates are pushed to the client.</p>
</blockquote>
<blockquote>
<p>Prove it!</p>
<p> — you</p>
</blockquote>
<p>ok ok.. I’ll prove it. To prove that it’s a regular controller, we’ll need to
look at some of Phoenix LiveView’s source code. Let’s look at the code that
makes <code>live("/my-route", MyLive)</code> work in the router.</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmacro</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">live</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">path</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">live_view</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">action</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">\\</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">opts</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">\\</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> []) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">quote</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">bind_quoted:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> binding() </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    {action, router_options} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">LiveView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Router</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.__live__(</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-12">__MODULE__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, live_view, action, opts)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># vvvvv THIS PART</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Router</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(path, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">LiveView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Plug</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, action, router_options)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ^^^^^ THIS PART</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<p>You see it?! <code>live()</code> is calling this function:</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Router</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;/my-route&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">LiveView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Plug</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_action</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span></code></pre>
<p>You may recognize this as:</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">get </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;/my-route&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyController</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:show</span></span></span></code></pre>
<p>in your own router. We’re going to ignore the action and options for this post,
but the important part is that the <code>live()</code> macro is adding a GET route and
calls the <code>Phoenix.LiveView.Plug</code></p>
<blockquote>
<p>But, that plug isn’t a controller…</p>
<p>— you</p>
</blockquote>
<p>Ah, but it is! A Phoenix Controller, even the ones you make, are indeed all just
plugs underneath. <strong>All Phoenix controllers are plugs</strong>.</p>
<p><a name="pluggy-controllers"></a></p>
<h2>Pluggy Controllers</h2>
<p>When your controllers call <code>use MyAppWeb, :controller</code>, it’s <em>injecting code</em>
into your controller at compile-time. Let’s explore how that works.</p>
<p>First at step 0 we need to understand that when Elixir code calls <code>use MyUsingModule</code> it’s actually calling <code>MyUsingModule.__using__(opts)</code> at
compile-time, and that resulting code is put into the module that called it.
Knowing that, let’s follow the <code>use</code> trail.</p>
<p>Starting at the top in our own code:</p>
<p><strong>Warning: we’re going to look at macros now. The rules of which you thought
Elixir was governed-by, ie, immutability, may not be in effect</strong></p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">######################################</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### Inside MyAppWeb.PageController ###</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">######################################</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.PageController</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:controller</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">home</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">conn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    render(conn, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;home.html&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">#######################</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### Inside MyAppWeb ###</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">#######################</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmacro</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">__using__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">which</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">when</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> is_atom(which) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  apply(</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-12">__MODULE__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, which, [])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">quote</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># vvv let&#39;s look in here vvv</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">namespace:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ^^^ let&#39;s look in here ^^^</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">#################################</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### Inside Phoenix.Controller ###</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">#################################</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmacro</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">__using__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">opts</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">quote</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">bind_quoted:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">opts:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> opts] </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">import</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Controller</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># vvv let&#39;s look in here vvv</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Pipeline</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, opts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ^^^ let&#39;s look in here ^^^</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">if</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Keyword</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(opts, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:put_default_views</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">true</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      plug </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:put_new_layout</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, {</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.__layout__(</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-12">__MODULE__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, opts), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:app</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      plug </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:put_new_view</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.__view__(</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-12">__MODULE__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">##########################################</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### Inside Phoenix.Controller.Pipeline ###</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">##########################################</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmacro</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">__using__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">opts</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">quote</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">bind_quoted:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">opts:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> opts] </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@behaviour</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Plug</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">## AHA! HERE&#39;S YOUR CONTROLLER PLUG BEHAVIOUR</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">require</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Endpoint</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">import</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Pipeline</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Module</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.register_attribute(</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-12">__MODULE__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:plugs</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">accumulate:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">true</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@before_compile</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Pipeline</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@phoenix_log_level</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Keyword</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(opts, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:log</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:debug</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@phoenix_fallback</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:unregistered</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">@doc false</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">init</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">opts</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> opts</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">@doc false</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">call</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">conn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">action</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">when</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> is_atom(action) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      conn</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> merge_private(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">phoenix_controller:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-12">__MODULE__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">phoenix_action:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> action</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># fun fact, this function below was introduced</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ~6 years ago in Phoenix 0.5.0 and utilizes unhygienic functions.</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># (as in you&#39;re in deep macro-land and your normal rules don&#39;t apply)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> phoenix_controller_pipeline(action)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">@doc false</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">action</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(%</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Plug</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Conn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">private:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">phoenix_action:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">action</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">conn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      apply(</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-12">__MODULE__</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, action, [conn, conn.params])</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defoverridable</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">init:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">1</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">call:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">2</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">action:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">2</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<p>Wow! Wild. All this means our slim controllers actually have a lot more code in
it than it appears, and that’s ok because it makes working in Phoenix much more
convenient.</p>
<p>All plugs must implement <code>call/2</code> which accepts a conn and returns a conn. In
our case, we’re looking for a conn that has some rendered HTML.</p>
<p><a name="liveview-default-2"></a></p>
<h2>Back to Default Phoenix LiveView without <code>render/1</code></h2>
<p>Now that we know that LiveViews are a <code>GET</code> request using a standard
controller/plug underneath, let’s look at the <code>Phoenix.LiveView.Plug</code>. We’re
still looking for how a LiveView gets to the template.</p>
<p>LiveView has a similar <code>__using__</code> code-path. Let’s look at LiveView’s plug:</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">call</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(%{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">private:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">phoenix_live_view:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> {</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">view</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">opts</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">conn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  opts </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> maybe_dispatch_session(conn, opts)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ...snip... there&#39;s a lot of code here we&#39;re going to skip</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  conn</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.put_layout(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">false</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> put_root_layout_from_router(opts)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># this actually is piped into `Controller.live_render(view, opts)`</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># but I&#39;m going to cut/paste what that ends up doing</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">LiveView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Static</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.render(conn, view, opts)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ... more snipping...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> to_rendered_content_tag(socket, tag, view, attrs)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ... more snipping...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> view.render()  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">#&lt;-- here here here!</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<p>Cool; this isn’t anything new so far. This is just confirming that Phoenix
LiveView starts off as a regular HTTP request with a full HTML response. <em>how
does it render?</em></p>
<p>We see that it’s calling <code>view.render()</code> where <code>view</code> is our own LiveView, but
we didn’t define <code>render/1</code> yet! Where’s it coming from?</p>
<p>When we called <code>use MyAppWeb, :live_view</code> it kicked off a series of <code>__using__</code>,
which includes <code>use Phoenix.LiveView</code>. In <code>Phoenix.LiveView</code>, it’s including a
<code>@before_compile Phoenix.LiveView.Renderer</code> hook. Let’s check that out.</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">render? </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Module</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.defines?(env.module, {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:render</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">1</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">})</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">root </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Path</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.dirname(env.file)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">filename </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> template_filename(env)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">templates </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Template</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.find_all(root, filename)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">case</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> {render?, templates} </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  {</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">false</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [template]} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    ext </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> template </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Path</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.extname() </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">String</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.trim_leading(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;.&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">String</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.to_atom()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    engine </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Map</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.fetch!(</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Template</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.engines(), ext)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    ast </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> engine.compile(template, filename)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">quote</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@file</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">unquote</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(template)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@external_resource</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">unquote</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(template)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">render</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(var!(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">assigns</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">unquote</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(ast)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># ... other clauses</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<p>Finally! This is where the default <code>render/1</code> function comes from. Before our
LiveView compiles, it checks to see if a <code>render/1</code> is defined, and if not, it
will drop one in for us. The default location for LiveView templates is right
next to the LiveView file itself. We see this from the <code>root = Path.dirname(env.file)</code>.</p>
<p><a name="liveview-inline"></a></p>
<h2>Phoenix LiveView with inline <code>render/1</code></h2>
<p>Another option is to implement <code>render/1</code> ourselves. <a href="https://hexdocs.pm/phoenix_live_view/Phoenix.LiveView.html#module-life-cycle">The docs make this pretty
clear how to do that</a>.</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="10"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### lib/my_app_web/live/my_live.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.MyLive</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:live_view</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@impl</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">LiveView</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">mount</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_params</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_session</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">socket</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># do stuff</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, socket}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">render</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">assigns</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">~L&quot;&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    &lt;</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-7">p</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&gt;Yo! I&#39;m rendered from a </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-1">&lt;%=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> my_helper(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;vanilla&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-1">%&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> view&lt;/</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-7">p</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">my_helper</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;vanilla&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;whoops no this is actually live&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<p>This feels the most similar to frontend frameworks such as Vue with
single-file-components (SFCs), or React.</p>
<p>This is a great option in case your LiveView doesn’t have a lot of HTML. Perhaps
you’re implementing a small widget. At some point, however, it becomes a little
crowded if you have a lot of business logic handling changes in the LiveView as
well as hundreds of lines of HTML and functions to conditionally render some
HTML or apply CSS classes; so you might consider separating the HTML out into
its own file.</p>
<p><a name="liveview-external"></a></p>
<h2>Phoenix LiveView with external <code>render/1</code></h2>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="11"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### lib/my_app_web/live/my_live.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.MyLive</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:live_view</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@impl</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">LiveView</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">mount</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_params</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_session</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">socket</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># do stuff</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, socket}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">render</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">assigns</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.render(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;my_live.html&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, assigns)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### lib/my_app_web/views/my_view.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.MyView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:view</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">my_helper</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;vanilla&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;whoops no this is actually live&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="eex" data-index="12"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&lt;!-- lib/my_app_web/templates/my/my_live.html.leex --&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&lt;p&gt;Yo! I&#39;m rendered from a </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-1">&lt;%=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> my_helper(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;vanilla&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-1">%&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> view&lt;/p&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&lt;!-- this renders &quot;whoops no this is actually live&quot; instead of &quot;vanilla&quot; --&gt;</span></span></span></code></pre>
<p>If I have a lot of HTML helpers, then I tend to prefer separating that into a
View module. It’s a little tedious to setup and separate the files, and then
jump between them when developing, but it’s clear where functions should go.</p>
<p>This bugged me though, I have HTML floating in <code>./templates</code> and sometimes in
<code>./live</code> and sometimes inline. Can we consolidate?</p>
<p>Sure we can! <code>Phoenix.View</code> <a href="https://hexdocs.pm/phoenix/Phoenix.View.html?#__using__/1">provides an option to look for templates in a
different folder</a>.
Let’s try it out. We need to supply <code>root</code> and <code>path</code> with <code>use Phoenix.View</code>:</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="13"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### lib/my_app_web/views/my_view.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.MyView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">View</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">root:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;lib/my_app_web/live&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">path:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">namespace:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># and all the other imports that come with `use MyAppWeb, :view`</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">my_helper</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;vanilla&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;whoops no this is actually live&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="eex" data-index="14"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&lt;!-- lib/my_app_web/live/my_live.html.leex --&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&lt;p&gt;Yo! I&#39;m rendered from a </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-1">&lt;%=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> my_helper(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;vanilla&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-1">%&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> view&lt;/p&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">&lt;!-- this renders &quot;whoops no this is actually live&quot; instead of &quot;vanilla&quot; --&gt;</span></span></span></code></pre>
<p>It’s exactly the same, except where the HTML is on disk and that we can’t use
our <code>use MyAppWeb, :view</code> as-is anymore without some further adjustment. To
prove the concept though, copy out all the additional imports you find for views
in <code>my_app_web.ex</code> and place it here for now. If it works out, then you can add
another clause in <code>my_app_web.ex</code> to handle these kinds of views. Maybe
something like this.</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="15"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### lib/my_app_web.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">view_for_live</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">quote</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">View</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">root:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;lib/my_app_web/live&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">path:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">namespace:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># Import convenience functions from controllers</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">import</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Controller</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">only:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">get_flash:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">1</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">get_flash:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">2</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">view_module:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">1</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># Use all HTML functionality (forms, tags, etc)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTML</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">import</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">ErrorHelpers</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">import</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Gettext</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">import</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Phoenix</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">LiveView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Helpers</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">import</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">LiveHelpers</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">alias</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Router</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Helpers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">as:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Routes</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># and then use this instead for your LiveView-centric Views</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">### lib/my_app_web/views/my_view.ex</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyAppWeb.MyView</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyAppWeb</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:view_for_live</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">my_helper</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;vanilla&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;whoops no this is actually live&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<h2>What about LiveComponents?</h2>
<p>LiveComponents are totally ignored in this article. They’re another great option
for organizing interactive partials from your LiveViews. Their rendering
strategy is very similar to LiveViews though, and most of this applies to them
as well.</p>
<p>Hope these tips help you out! If you have any more tips, tweet at me
<a href="https://twitter.com/bernheisel">@bernheisel</a></p>
<style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line > * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: ' ';
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {
    content: ' ';
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .atom-one-light {
    background-color: #FAFAFA;
    color: #383A42;
  }
  .atom-one-light .grvsc-t5WxC3-i { font-style: italic; }
  .atom-one-light .grvsc-t5WxC3-7 { color: #A0A1A7; }
  .atom-one-light .grvsc-t5WxC3-14 { color: #A626A4; }
  .atom-one-light .grvsc-t5WxC3-1 { color: #383A42; }
  .atom-one-light .grvsc-t5WxC3-4 { color: #C18401; }
  .atom-one-light .grvsc-t5WxC3-9 { color: #4078F2; }
  .atom-one-light .grvsc-t5WxC3-5 { color: #E45649; }
  .atom-one-light .grvsc-t5WxC3-8 { color: #0184BC; }
  .atom-one-light .grvsc-t5WxC3-10 { color: #50A14F; }
  .atom-one-light .grvsc-t5WxC3-6 { color: #986801; }
  .atom-one-light .grvsc-t5WxC3-15 { color: #CA1243; }
  .atom-one-light .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));
  }
  
  /* Monokai Phoenix */
  @media (prefers-color-scheme: dark) {
    .grvsc-mm-t88nfI {
      background-color: #1e1e1e;
      color: #F8F8F2;
    }
    .grvsc-mm-t88nfI .grvsc-t88nfI-3 { color: #75715E; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-7 { color: #F92672; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-1 { color: #F8F8F2; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-4 { color: #AE81FF; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-6 { color: #E6DB74; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-5 { color: #A6E22E; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-12 { color: #64D9EA; }
    .grvsc-mm-t88nfI .grvsc-line-highlighted::before {
      background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
      box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
    }
  }
</style></div></article><div class="flex flex-wrap justify-between"><div class="w-full p-2 lg:w-1/2"><a class="no-underline inline-flex items-center flex-1 dark:button-dark button" href="/blog/starting-a-new-podcast/"><svg class="w-6 h-6 mr-2 fill-current" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1408 960v-128q0-26-19-45t-45-19h-502l189-189q19-19 19-45t-19-45l-91-91q-18-18-45-18t-45 18l-362 362-91 91q-18 18-18 45t18 45l91 91 362 362q18 18 45 18t45-18l91-91q18-18 18-45t-18-45l-189-189h502q26 0 45-19t19-45zm256-64q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"></path></svg><span>Starting a New Podcast with Thinking |&gt; Elixir</span></a></div></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/phoenix-liveview-and-views/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-e49f8733b8aee9471acf.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-8dc5b1de7df84c955e11.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-f37877f27548564a00ab.js"],"component---src-pages-404-js":["/component---src-pages-404-js-f9633554493dddb1c536.js"],"component---src-pages-index-js":["/component---src-pages-index-js-f71e923739c6685c4443.js"],"component---src-pages-projects-js":["/component---src-pages-projects-js-ce130e74c0d10fe8ba37.js"]};/*]]>*/</script><script src="/webpack-runtime-b88e2e84f842e50b7923.js" async=""></script><script src="/app-e49f8733b8aee9471acf.js" async=""></script><script src="/framework-1cbcc4f69858806ac5db.js" async=""></script><script src="/1777bc0a756dace6068a54d243c7071eee1627a0-c8bbedbe2105888d6327.js" async=""></script><script src="/component---src-templates-blog-post-js-f37877f27548564a00ab.js" async=""></script><script src="/styles-48fa8a050a65bb8447bd.js" async=""></script></body></html>