<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f455b503133ea33eb614.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}main{display:block}h1{font-size:2em;margin:.67em 0}hr{-webkit-box-sizing:content-box;box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{-webkit-box-sizing:border-box;box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{-webkit-box-sizing:border-box;box-sizing:border-box;border:0 solid #e2e8f0}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:#a0aec0}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder,textarea::-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.prose{color:#4a5568;max-width:65ch;font-size:1rem;line-height:1.75}.prose [class~=lead]{color:#4a5568;font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.prose a{color:#9b2c2c;text-decoration:none}.prose strong{color:#1a202c;font-weight:600}.prose ol{counter-reset:list-counter;margin-top:1.25em;margin-bottom:1.25em}.prose ol>li{position:relative;counter-increment:list-counter;padding-left:1.75em}.prose ol>li:before{content:counter(list-counter) ".";position:absolute;font-weight:400;color:#718096}.prose ul>li{position:relative;padding-left:1.75em}.prose ul>li:before{content:"";position:absolute;background-color:#cbd5e0;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.prose hr{border-color:#e2e8f0;border-top-width:1px;margin-top:3em;margin-bottom:3em}.prose blockquote{font-weight:500;font-style:italic;color:#1a202c;border-left-width:.25rem;border-left-color:#9f7aea;quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.prose blockquote p:first-of-type:before{content:open-quote}.prose blockquote p:last-of-type:after{content:close-quote}.prose h1{color:#1a202c;font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose h2{color:#1a202c;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose h3{font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose h3,.prose h4{color:#1a202c;font-weight:600}.prose h4{margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.prose figure figcaption{color:#718096;font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose code{font-size:.875em}.prose pre{overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.prose pre code{border-width:0;border-radius:0;padding:0;font-weight:400}.prose table{width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.prose thead{color:#1a202c;font-weight:600;border-bottom-width:1px;border-bottom-color:#cbd5e0}.prose thead th{vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}.prose tbody tr{border-bottom-width:1px;border-bottom-color:#e2e8f0}.prose tbody tr:last-child{border-bottom-width:0}.prose tbody td{vertical-align:top;padding:.5714286em}.prose p{margin-top:1.25em;margin-bottom:1.25em}.prose figure,.prose img,.prose video{margin-top:2em;margin-bottom:2em}.prose figure>*{margin-top:0;margin-bottom:0}.prose h2 code{font-size:.875em}.prose h3 code{font-size:.9em}.prose ul{margin-top:1.25em;margin-bottom:1.25em}.prose li{margin-top:.5em;margin-bottom:.5em}.prose ol>li:before{left:0}.prose>ul>li p{margin-top:.75em;margin-bottom:.75em}.prose>ul>li>:first-child{margin-top:1.25em}.prose>ul>li>:last-child{margin-bottom:1.25em}.prose>ol>li>:first-child{margin-top:1.25em}.prose>ol>li>:last-child{margin-bottom:1.25em}.prose ol ol,.prose ol ul,.prose ul ol,.prose ul ul{margin-top:.75em;margin-bottom:.75em}.prose hr+*{margin-top:0}.prose h2+*{margin-top:0}.prose h3+*{margin-top:0}.prose h4+*{margin-top:0}.prose thead th:first-child{padding-left:0}.prose thead th:last-child{padding-right:0}.prose tbody td:first-child{padding-left:0}.prose tbody td:last-child{padding-right:0}.prose>:first-child{margin-top:0}.prose>:last-child{margin-bottom:0}.prose-sm{font-size:.875rem;line-height:1.7142857}.prose-sm p{margin-top:1.1428571em;margin-bottom:1.1428571em}.prose-sm [class~=lead]{font-size:1.2857143em;line-height:1.5555556;margin-top:.8888889em;margin-bottom:.8888889em}.prose-sm blockquote{margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.1111111em}.prose-sm h1{font-size:2.1428571em;margin-top:0;margin-bottom:.8em;line-height:1.2}.prose-sm h2{font-size:1.4285714em;margin-top:1.6em;margin-bottom:.8em;line-height:1.4}.prose-sm h3{font-size:1.2857143em;margin-top:1.5555556em;margin-bottom:.4444444em;line-height:1.5555556}.prose-sm h4{margin-top:1.4285714em;margin-bottom:.5714286em;line-height:1.4285714}.prose-sm figure,.prose-sm img,.prose-sm video{margin-top:1.7142857em;margin-bottom:1.7142857em}.prose-sm figure>*{margin-top:0;margin-bottom:0}.prose-sm figure figcaption{font-size:.8571429em;line-height:1.3333333;margin-top:.6666667em}.prose-sm code{font-size:.8571429em}.prose-sm h2 code{font-size:.9em}.prose-sm h3 code{font-size:.8888889em}.prose-sm pre{font-size:.8571429em;line-height:1.6666667;margin-top:1.6666667em;margin-bottom:1.6666667em;border-radius:.25rem;padding:.6666667em 1em}.prose-sm ol,.prose-sm ul{margin-top:1.1428571em;margin-bottom:1.1428571em}.prose-sm li{margin-top:.2857143em;margin-bottom:.2857143em}.prose-sm ol>li{padding-left:1.5714286em}.prose-sm ol>li:before{left:0}.prose-sm ul>li{padding-left:1.5714286em}.prose-sm ul>li:before{height:.3571429em;width:.3571429em;top:.67857em;left:.2142857em}.prose-sm>ul>li p{margin-top:.5714286em;margin-bottom:.5714286em}.prose-sm>ul>li>:first-child{margin-top:1.1428571em}.prose-sm>ul>li>:last-child{margin-bottom:1.1428571em}.prose-sm>ol>li>:first-child{margin-top:1.1428571em}.prose-sm>ol>li>:last-child{margin-bottom:1.1428571em}.prose-sm ol ol,.prose-sm ol ul,.prose-sm ul ol,.prose-sm ul ul{margin-top:.5714286em;margin-bottom:.5714286em}.prose-sm hr{margin-top:2.8571429em;margin-bottom:2.8571429em}.prose-sm hr+*{margin-top:0}.prose-sm h2+*{margin-top:0}.prose-sm h3+*{margin-top:0}.prose-sm h4+*{margin-top:0}.prose-sm table{font-size:.8571429em;line-height:1.5}.prose-sm thead th{padding-right:1em;padding-bottom:.6666667em;padding-left:1em}.prose-sm thead th:first-child{padding-left:0}.prose-sm thead th:last-child{padding-right:0}.prose-sm tbody td{padding:.6666667em 1em}.prose-sm tbody td:first-child{padding-left:0}.prose-sm tbody td:last-child{padding-right:0}.prose-sm>:first-child{margin-top:0}.prose-sm>:last-child{margin-bottom:0}.prose-lg{font-size:1.125rem;line-height:1.7777778}.prose-lg p{margin-top:1.3333333em;margin-bottom:1.3333333em}.prose-lg [class~=lead]{font-size:1.2222222em;line-height:1.4545455;margin-top:1.0909091em;margin-bottom:1.0909091em}.prose-lg blockquote{margin-top:1.6666667em;margin-bottom:1.6666667em;padding-left:1em}.prose-lg h1{font-size:2.6666667em;margin-top:0;margin-bottom:.8333333em;line-height:1}.prose-lg h2{font-size:1.6666667em;margin-top:1.8666667em;margin-bottom:1.0666667em;line-height:1.3333333}.prose-lg h3{font-size:1.3333333em;margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.prose-lg h4{margin-top:1.7777778em;margin-bottom:.4444444em;line-height:1.5555556}.prose-lg figure,.prose-lg img,.prose-lg video{margin-top:1.7777778em;margin-bottom:1.7777778em}.prose-lg figure>*{margin-top:0;margin-bottom:0}.prose-lg figure figcaption{font-size:.8888889em;line-height:1.5;margin-top:1em}.prose-lg code{font-size:.8888889em}.prose-lg h2 code{font-size:.8666667em}.prose-lg h3 code{font-size:.875em}.prose-lg pre{font-size:.8888889em;line-height:1.75;margin-top:2em;margin-bottom:2em;border-radius:.375rem;padding:1em 1.5em}.prose-lg ol,.prose-lg ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.prose-lg li{margin-top:.6666667em;margin-bottom:.6666667em}.prose-lg ol>li{padding-left:1.6666667em}.prose-lg ol>li:before{left:0}.prose-lg ul>li{padding-left:1.6666667em}.prose-lg ul>li:before{width:.3333333em;height:.3333333em;top:.72222em;left:.2222222em}.prose-lg>ul>li p{margin-top:.8888889em;margin-bottom:.8888889em}.prose-lg>ul>li>:first-child{margin-top:1.3333333em}.prose-lg>ul>li>:last-child{margin-bottom:1.3333333em}.prose-lg>ol>li>:first-child{margin-top:1.3333333em}.prose-lg>ol>li>:last-child{margin-bottom:1.3333333em}.prose-lg ol ol,.prose-lg ol ul,.prose-lg ul ol,.prose-lg ul ul{margin-top:.8888889em;margin-bottom:.8888889em}.prose-lg hr{margin-top:3.1111111em;margin-bottom:3.1111111em}.prose-lg hr+*{margin-top:0}.prose-lg h2+*{margin-top:0}.prose-lg h3+*{margin-top:0}.prose-lg h4+*{margin-top:0}.prose-lg table{font-size:.8888889em;line-height:1.5}.prose-lg thead th{padding-right:.75em;padding-bottom:.75em;padding-left:.75em}.prose-lg thead th:first-child{padding-left:0}.prose-lg thead th:last-child{padding-right:0}.prose-lg tbody td{padding:.75em}.prose-lg tbody td:first-child{padding-left:0}.prose-lg tbody td:last-child{padding-right:0}.prose-lg>:first-child{margin-top:0}.prose-lg>:last-child{margin-bottom:0}.prose-xl{font-size:1.25rem;line-height:1.8}.prose-xl p{margin-top:1.2em;margin-bottom:1.2em}.prose-xl [class~=lead]{font-size:1.2em;line-height:1.5;margin-top:1em;margin-bottom:1em}.prose-xl blockquote{margin-top:1.6em;margin-bottom:1.6em;padding-left:1.0666667em}.prose-xl h1{font-size:2.8em;margin-top:0;margin-bottom:.8571429em;line-height:1}.prose-xl h2{font-size:1.8em;margin-top:1.5555556em;margin-bottom:.8888889em;line-height:1.1111111}.prose-xl h3{font-size:1.5em;margin-top:1.6em;margin-bottom:.6666667em;line-height:1.3333333}.prose-xl h4{margin-top:1.8em;margin-bottom:.6em;line-height:1.6}.prose-xl figure,.prose-xl img,.prose-xl video{margin-top:2em;margin-bottom:2em}.prose-xl figure>*{margin-top:0;margin-bottom:0}.prose-xl figure figcaption{font-size:.9em;line-height:1.5555556;margin-top:1em}.prose-xl code{font-size:.9em}.prose-xl h2 code{font-size:.8611111em}.prose-xl h3 code,.prose-xl pre{font-size:.9em}.prose-xl pre{line-height:1.7777778;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.1111111em 1.3333333em}.prose-xl ol,.prose-xl ul{margin-top:1.2em;margin-bottom:1.2em}.prose-xl li{margin-top:.6em;margin-bottom:.6em}.prose-xl ol>li{padding-left:1.8em}.prose-xl ol>li:before{left:0}.prose-xl ul>li{padding-left:1.8em}.prose-xl ul>li:before{width:.35em;height:.35em;top:.725em;left:.25em}.prose-xl>ul>li p{margin-top:.8em;margin-bottom:.8em}.prose-xl>ul>li>:first-child{margin-top:1.2em}.prose-xl>ul>li>:last-child{margin-bottom:1.2em}.prose-xl>ol>li>:first-child{margin-top:1.2em}.prose-xl>ol>li>:last-child{margin-bottom:1.2em}.prose-xl ol ol,.prose-xl ol ul,.prose-xl ul ol,.prose-xl ul ul{margin-top:.8em;margin-bottom:.8em}.prose-xl hr{margin-top:2.8em;margin-bottom:2.8em}.prose-xl hr+*{margin-top:0}.prose-xl h2+*{margin-top:0}.prose-xl h3+*{margin-top:0}.prose-xl h4+*{margin-top:0}.prose-xl table{font-size:.9em;line-height:1.5555556}.prose-xl thead th{padding-right:.6666667em;padding-bottom:.8888889em;padding-left:.6666667em}.prose-xl thead th:first-child{padding-left:0}.prose-xl thead th:last-child{padding-right:0}.prose-xl tbody td{padding:.8888889em .6666667em}.prose-xl tbody td:first-child{padding-left:0}.prose-xl tbody td:last-child{padding-right:0}.prose-xl>:first-child{margin-top:0}.prose-xl>:last-child{margin-bottom:0}.prose-2xl{font-size:1.5rem;line-height:1.6666667}.prose-2xl p{margin-top:1.3333333em;margin-bottom:1.3333333em}.prose-2xl [class~=lead]{font-size:1.25em;line-height:1.4666667;margin-top:1.0666667em;margin-bottom:1.0666667em}.prose-2xl blockquote{margin-top:1.7777778em;margin-bottom:1.7777778em;padding-left:1.1111111em}.prose-2xl h1{font-size:2.6666667em;margin-top:0;margin-bottom:.875em;line-height:1}.prose-2xl h2{font-size:2em;margin-top:1.5em;margin-bottom:.8333333em;line-height:1.0833333}.prose-2xl h3{font-size:1.5em;margin-top:1.5555556em;margin-bottom:.6666667em;line-height:1.2222222}.prose-2xl h4{margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.prose-2xl figure,.prose-2xl img,.prose-2xl video{margin-top:2em;margin-bottom:2em}.prose-2xl figure>*{margin-top:0;margin-bottom:0}.prose-2xl figure figcaption{font-size:.8333333em;line-height:1.6;margin-top:1em}.prose-2xl code{font-size:.8333333em}.prose-2xl h2 code{font-size:.875em}.prose-2xl h3 code{font-size:.8888889em}.prose-2xl pre{font-size:.8333333em;line-height:1.8;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.2em 1.6em}.prose-2xl ol,.prose-2xl ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.prose-2xl li{margin-top:.5em;margin-bottom:.5em}.prose-2xl ol>li{padding-left:1.6666667em}.prose-2xl ol>li:before{left:0}.prose-2xl ul>li{padding-left:1.6666667em}.prose-2xl ul>li:before{width:.3333333em;height:.3333333em;top:.66667em;left:.25em}.prose-2xl>ul>li p{margin-top:.8333333em;margin-bottom:.8333333em}.prose-2xl>ul>li>:first-child{margin-top:1.3333333em}.prose-2xl>ul>li>:last-child{margin-bottom:1.3333333em}.prose-2xl>ol>li>:first-child{margin-top:1.3333333em}.prose-2xl>ol>li>:last-child{margin-bottom:1.3333333em}.prose-2xl ol ol,.prose-2xl ol ul,.prose-2xl ul ol,.prose-2xl ul ul{margin-top:.6666667em;margin-bottom:.6666667em}.prose-2xl hr{margin-top:3em;margin-bottom:3em}.prose-2xl hr+*{margin-top:0}.prose-2xl h2+*{margin-top:0}.prose-2xl h3+*{margin-top:0}.prose-2xl h4+*{margin-top:0}.prose-2xl table{font-size:.8333333em;line-height:1.4}.prose-2xl thead th{padding-right:.6em;padding-bottom:.8em;padding-left:.6em}.prose-2xl thead th:first-child{padding-left:0}.prose-2xl thead th:last-child{padding-right:0}.prose-2xl tbody td{padding:.8em .6em}.prose-2xl tbody td:first-child{padding-left:0}.prose-2xl tbody td:last-child{padding-right:0}.prose-2xl>:first-child{margin-top:0}.prose-2xl>:last-child{margin-bottom:0}.prose-dark{color:#e2e8f0}.prose-dark blockquote{color:#a0aec0}.prose-dark h1,.prose-dark h2,.prose-dark h3,.prose-dark h4,.prose-dark h5,.prose-dark h6{color:#e2e8f0}.prose-dark figcaption{color:#a0aec0}.prose-dark thead{color:#e2e8f0}@font-face{font-family:Fira Code;src:url(/FiraCode-Light.woff2) format("woff2"),url(/FiraCode-Light.woff) format("woff");font-weight:300;font-style:normal}@font-face{font-family:Fira Code;src:url(/FiraCode-Regular.woff2) format("woff2"),url(/FiraCode-Regular.woff) format("woff");font-weight:400;font-style:normal}@font-face{font-family:Fira Code;src:url(/FiraCode-Medium.woff2) format("woff2"),url(/FiraCode-Medium.woff) format("woff");font-weight:500;font-style:normal}@font-face{font-family:Fira Code;src:url(/FiraCode-SemiBold.woff2) format("woff2"),url(/FiraCode-SemiBold.woff) format("woff");font-weight:600;font-style:normal}@font-face{font-family:Fira Code;src:url(/FiraCode-Bold.woff2) format("woff2"),url(/FiraCode-Bold.woff) format("woff");font-weight:700;font-style:normal}@font-face{font-family:Fira Code VF;src:url(/FiraCode-VF.woff2) format("woff2-variations"),url(/FiraCode-VF.woff) format("woff-variations");font-weight:300 700;font-style:normal}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:1.125rem;line-height:1.5;letter-spacing:.025em;--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity));background-color:#f7fafc;background-color:rgba(247,250,252,var(--bg-opacity))}.navbar,body{--bg-opacity:1}.navbar{background-color:#e2e8f0;background-color:rgba(226,232,240,var(--bg-opacity))}code,pre{font-weight:400;letter-spacing:0;font-family:Fira Code!important;border:none!important}.avatar{border-width:2px;--border-opacity:1;border-color:#f7fafc;border-color:rgba(247,250,252,var(--border-opacity));border-radius:9999px;-webkit-box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.button{padding:.5rem .75rem;font-weight:500;--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity));text-decoration:none;background-color:#a0aec0;background-color:rgba(160,174,192,var(--bg-opacity));border-color:#718096;border-color:rgba(113,128,150,var(--border-opacity));border-radius:.25rem;-webkit-box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-property:background-color,border-color,color,fill,stroke;transition-property:background-color,border-color,color,fill,stroke}.button,.button.disabled{--bg-opacity:1;--border-opacity:1}.button.disabled{background-color:#718096;background-color:rgba(113,128,150,var(--bg-opacity));border-color:#4a5568;border-color:rgba(74,85,104,var(--border-opacity));cursor:default}.button:hover{--bg-opacity:1;background-color:#718096;background-color:rgba(113,128,150,var(--bg-opacity));--border-opacity:1;border-color:#4a5568;border-color:rgba(74,85,104,var(--border-opacity))}.button:focus{--bg-opacity:1;background-color:#718096;background-color:rgba(113,128,150,var(--bg-opacity));--border-opacity:1;border-color:#4a5568;border-color:rgba(74,85,104,var(--border-opacity))}.post-container{--border-opacity:1;border-color:#4a5568;border-bottom:2px;border-style:dotted;border-color:rgba(74,85,104,var(--border-opacity))}.link{font-weight:500;--text-opacity:1;color:#9b2c2c;color:rgba(155,44,44,var(--text-opacity));text-decoration:none;-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1);-webkit-transition-property:background-color,border-color,color,fill,stroke;transition-property:background-color,border-color,color,fill,stroke}.link:visited{--text-opacity:1;color:#553c9a;color:rgba(85,60,154,var(--text-opacity))}.link:hover{--text-opacity:1;color:#9b2c2c;color:rgba(155,44,44,var(--text-opacity));border-bottom-width:1px;--border-opacity:1;border-color:#38b2ac;border-color:rgba(56,178,172,var(--border-opacity))}h1.post-content:before,h1.post-header:before{--text-opacity:1;color:#cbd5e0;color:rgba(203,213,224,var(--text-opacity))}h1.post-content:before,h1.post-header:before{margin-right:1rem;content:"#"}.prose a{-webkit-transition-property:background-color,border-color,color,fill,stroke;transition-property:background-color,border-color,color,fill,stroke;-webkit-transition-duration:.1s;transition-duration:.1s;-webkit-transition-timing-function:cubic-bezier(.4,0,.2,1);transition-timing-function:cubic-bezier(.4,0,.2,1)}.prose a:focus{--text-opacity:1;color:#9b2c2c;color:rgba(155,44,44,var(--text-opacity))}.prose a:visited{--text-opacity:1;color:#553c9a;color:rgba(85,60,154,var(--text-opacity))}.prose a:hover{--text-opacity:1;color:#9b2c2c;color:rgba(155,44,44,var(--text-opacity));border-bottom-width:1px;--border-opacity:1;border-color:#38b2ac;border-color:rgba(56,178,172,var(--border-opacity));text-decoration:none}.post-content a.gatsby-resp-image-link:hover{border-width:0}@media (prefers-color-scheme:dark){body{--bg-opacity:1;background-color:#1a202c;background-color:rgba(26,32,44,var(--bg-opacity));--text-opacity:1;color:#e2e8f0;color:rgba(226,232,240,var(--text-opacity))}.prose strong{--text-opacity:1!important;color:#f7fafc!important;color:rgba(247,250,252,var(--text-opacity))!important}h1.post-content:before,h1.post-header:before{--text-opacity:1;color:#4a5568;color:rgba(74,85,104,var(--text-opacity))}.navbar{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity));--bg-opacity:0.25}.avatar{--border-opacity:1;border-color:#2d3748;border-color:rgba(45,55,72,var(--border-opacity))}.button{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity));background-color:#718096;background-color:rgba(113,128,150,var(--bg-opacity));border-color:#a0aec0;border-color:rgba(160,174,192,var(--border-opacity))}.button,.button.disabled{--bg-opacity:1;--border-opacity:1}.button.disabled{background-color:#a0aec0;background-color:rgba(160,174,192,var(--bg-opacity));border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.button:hover{--bg-opacity:1;background-color:#a0aec0;background-color:rgba(160,174,192,var(--bg-opacity));--border-opacity:1;border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.button:focus{--bg-opacity:1;background-color:#a0aec0;background-color:rgba(160,174,192,var(--bg-opacity));--border-opacity:1;border-color:#cbd5e0;border-color:rgba(203,213,224,var(--border-opacity))}.prose a{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity))}.prose a:focus{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity))}.prose a:visited{--text-opacity:1;color:#e9d8fd;color:rgba(233,216,253,var(--text-opacity))}.prose a:hover{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity))}.link{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity))}.link:visited{--text-opacity:1;color:#e9d8fd;color:rgba(233,216,253,var(--text-opacity))}.link:hover{--text-opacity:1;color:#fed7d7;color:rgba(254,215,215,var(--text-opacity));--border-opacity:1;border-color:#38b2ac;border-color:rgba(56,178,172,var(--border-opacity))}}.space-x-1>:not(template)~:not(template){--space-x-reverse:0;margin-right:calc(0.25rem*var(--space-x-reverse));margin-left:calc(0.25rem*(1 - var(--space-x-reverse)))}.space-y-4>:not(template)~:not(template){--space-y-reverse:0;margin-top:calc(1rem*(1 - var(--space-y-reverse)));margin-bottom:calc(1rem*var(--space-y-reverse))}.space-x-4>:not(template)~:not(template){--space-x-reverse:0;margin-right:calc(1rem*var(--space-x-reverse));margin-left:calc(1rem*(1 - var(--space-x-reverse)))}.block{display:block}.flex{display:-webkit-box;display:-ms-flexbox;display:flex}.inline-flex{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}.hidden{display:none}.flex-col{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.flex-wrap{-ms-flex-wrap:wrap;flex-wrap:wrap}.items-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.justify-between{-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.flex-1{-webkit-box-flex:1;-ms-flex:1 1 0%;flex:1 1 0%}.flex-shrink-0{-ms-flex-negative:0;flex-shrink:0}.font-semibold{font-weight:600}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.h-3{height:.75rem}.h-6{height:1.5rem}.h-8{height:2rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-lg{font-size:1.125rem}.text-xl{font-size:1.25rem}.text-2xl{font-size:1.5rem}.text-3xl{font-size:1.875rem}.text-4xl{font-size:2.25rem}.leading-6{line-height:1.5rem}.leading-normal{line-height:1.5}.list-disc{list-style-type:disc}.m-auto{margin:auto}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mx-2{margin-left:.5rem;margin-right:.5rem}.mt-0{margin-top:0}.ml-0{margin-left:0}.mt-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.ml-2{margin-left:.5rem}.mt-4{margin-top:1rem}.mr-4{margin-right:1rem}.mb-4{margin-bottom:1rem}.mb-8{margin-bottom:2rem}.max-w-3xl{max-width:48rem}.p-2{padding:.5rem}.p-4{padding:1rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-3{padding-left:.75rem;padding-right:.75rem}.pl-4{padding-left:1rem}.pb-10{padding-bottom:2.5rem}.shadow-md{-webkit-box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06)}.fill-current{fill:currentColor}.no-underline{text-decoration:none}.tracking-wider{letter-spacing:.05em}.align-middle{vertical-align:middle}.w-3{width:.75rem}.w-6{width:1.5rem}.w-16{width:4rem}.w-full{width:100%}@media (min-width:640px){.sm\:container{width:100%;max-width:640px}@media (min-width:768px){.sm\:container{max-width:768px}}@media (min-width:1024px){.sm\:container{max-width:1024px}}@media (min-width:1280px){.sm\:container{max-width:1280px}}.sm\:prose{color:#4a5568;max-width:65ch;font-size:1rem;line-height:1.75}.sm\:prose [class~=lead]{color:#4a5568;font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.sm\:prose a{color:#9b2c2c;text-decoration:none}.sm\:prose strong{color:#1a202c;font-weight:600}.sm\:prose ol{counter-reset:list-counter;margin-top:1.25em;margin-bottom:1.25em}.sm\:prose ol>li{position:relative;counter-increment:list-counter;padding-left:1.75em}.sm\:prose ol>li:before{content:counter(list-counter) ".";position:absolute;font-weight:400;color:#718096}.sm\:prose ul>li{position:relative;padding-left:1.75em}.sm\:prose ul>li:before{content:"";position:absolute;background-color:#cbd5e0;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.sm\:prose hr{border-color:#e2e8f0;border-top-width:1px;margin-top:3em;margin-bottom:3em}.sm\:prose blockquote{font-weight:500;font-style:italic;color:#1a202c;border-left-width:.25rem;border-left-color:#9f7aea;quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.sm\:prose blockquote p:first-of-type:before{content:open-quote}.sm\:prose blockquote p:last-of-type:after{content:close-quote}.sm\:prose h1{color:#1a202c;font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.sm\:prose h2{color:#1a202c;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.sm\:prose h3{font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.sm\:prose h3,.sm\:prose h4{color:#1a202c;font-weight:600}.sm\:prose h4{margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.sm\:prose figure figcaption{color:#718096;font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.sm\:prose code{font-size:.875em}.sm\:prose pre{overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.sm\:prose pre code{border-width:0;border-radius:0;padding:0;font-weight:400}.sm\:prose table{width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.sm\:prose thead{color:#1a202c;font-weight:600;border-bottom-width:1px;border-bottom-color:#cbd5e0}.sm\:prose thead th{vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}.sm\:prose tbody tr{border-bottom-width:1px;border-bottom-color:#e2e8f0}.sm\:prose tbody tr:last-child{border-bottom-width:0}.sm\:prose tbody td{vertical-align:top;padding:.5714286em}.sm\:prose p{margin-top:1.25em;margin-bottom:1.25em}.sm\:prose figure,.sm\:prose img,.sm\:prose video{margin-top:2em;margin-bottom:2em}.sm\:prose figure>*{margin-top:0;margin-bottom:0}.sm\:prose h2 code{font-size:.875em}.sm\:prose h3 code{font-size:.9em}.sm\:prose ul{margin-top:1.25em;margin-bottom:1.25em}.sm\:prose li{margin-top:.5em;margin-bottom:.5em}.sm\:prose ol>li:before{left:0}.sm\:prose>ul>li p{margin-top:.75em;margin-bottom:.75em}.sm\:prose>ul>li>:first-child{margin-top:1.25em}.sm\:prose>ul>li>:last-child{margin-bottom:1.25em}.sm\:prose>ol>li>:first-child{margin-top:1.25em}.sm\:prose>ol>li>:last-child{margin-bottom:1.25em}.sm\:prose ol ol,.sm\:prose ol ul,.sm\:prose ul ol,.sm\:prose ul ul{margin-top:.75em;margin-bottom:.75em}.sm\:prose hr+*{margin-top:0}.sm\:prose h2+*{margin-top:0}.sm\:prose h3+*{margin-top:0}.sm\:prose h4+*{margin-top:0}.sm\:prose thead th:first-child{padding-left:0}.sm\:prose thead th:last-child{padding-right:0}.sm\:prose tbody td:first-child{padding-left:0}.sm\:prose tbody td:last-child{padding-right:0}.sm\:prose>:first-child{margin-top:0}.sm\:prose>:last-child{margin-bottom:0}.sm\:prose-sm{font-size:.875rem;line-height:1.7142857}.sm\:prose-sm p{margin-top:1.1428571em;margin-bottom:1.1428571em}.sm\:prose-sm [class~=lead]{font-size:1.2857143em;line-height:1.5555556;margin-top:.8888889em;margin-bottom:.8888889em}.sm\:prose-sm blockquote{margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.1111111em}.sm\:prose-sm h1{font-size:2.1428571em;margin-top:0;margin-bottom:.8em;line-height:1.2}.sm\:prose-sm h2{font-size:1.4285714em;margin-top:1.6em;margin-bottom:.8em;line-height:1.4}.sm\:prose-sm h3{font-size:1.2857143em;margin-top:1.5555556em;margin-bottom:.4444444em;line-height:1.5555556}.sm\:prose-sm h4{margin-top:1.4285714em;margin-bottom:.5714286em;line-height:1.4285714}.sm\:prose-sm figure,.sm\:prose-sm img,.sm\:prose-sm video{margin-top:1.7142857em;margin-bottom:1.7142857em}.sm\:prose-sm figure>*{margin-top:0;margin-bottom:0}.sm\:prose-sm figure figcaption{font-size:.8571429em;line-height:1.3333333;margin-top:.6666667em}.sm\:prose-sm code{font-size:.8571429em}.sm\:prose-sm h2 code{font-size:.9em}.sm\:prose-sm h3 code{font-size:.8888889em}.sm\:prose-sm pre{font-size:.8571429em;line-height:1.6666667;margin-top:1.6666667em;margin-bottom:1.6666667em;border-radius:.25rem;padding:.6666667em 1em}.sm\:prose-sm ol,.sm\:prose-sm ul{margin-top:1.1428571em;margin-bottom:1.1428571em}.sm\:prose-sm li{margin-top:.2857143em;margin-bottom:.2857143em}.sm\:prose-sm ol>li{padding-left:1.5714286em}.sm\:prose-sm ol>li:before{left:0}.sm\:prose-sm ul>li{padding-left:1.5714286em}.sm\:prose-sm ul>li:before{height:.3571429em;width:.3571429em;top:.67857em;left:.2142857em}.sm\:prose-sm>ul>li p{margin-top:.5714286em;margin-bottom:.5714286em}.sm\:prose-sm>ul>li>:first-child{margin-top:1.1428571em}.sm\:prose-sm>ul>li>:last-child{margin-bottom:1.1428571em}.sm\:prose-sm>ol>li>:first-child{margin-top:1.1428571em}.sm\:prose-sm>ol>li>:last-child{margin-bottom:1.1428571em}.sm\:prose-sm ol ol,.sm\:prose-sm ol ul,.sm\:prose-sm ul ol,.sm\:prose-sm ul ul{margin-top:.5714286em;margin-bottom:.5714286em}.sm\:prose-sm hr{margin-top:2.8571429em;margin-bottom:2.8571429em}.sm\:prose-sm hr+*{margin-top:0}.sm\:prose-sm h2+*{margin-top:0}.sm\:prose-sm h3+*{margin-top:0}.sm\:prose-sm h4+*{margin-top:0}.sm\:prose-sm table{font-size:.8571429em;line-height:1.5}.sm\:prose-sm thead th{padding-right:1em;padding-bottom:.6666667em;padding-left:1em}.sm\:prose-sm thead th:first-child{padding-left:0}.sm\:prose-sm thead th:last-child{padding-right:0}.sm\:prose-sm tbody td{padding:.6666667em 1em}.sm\:prose-sm tbody td:first-child{padding-left:0}.sm\:prose-sm tbody td:last-child{padding-right:0}.sm\:prose-sm>:first-child{margin-top:0}.sm\:prose-sm>:last-child{margin-bottom:0}.sm\:prose-lg{font-size:1.125rem;line-height:1.7777778}.sm\:prose-lg p{margin-top:1.3333333em;margin-bottom:1.3333333em}.sm\:prose-lg [class~=lead]{font-size:1.2222222em;line-height:1.4545455;margin-top:1.0909091em;margin-bottom:1.0909091em}.sm\:prose-lg blockquote{margin-top:1.6666667em;margin-bottom:1.6666667em;padding-left:1em}.sm\:prose-lg h1{font-size:2.6666667em;margin-top:0;margin-bottom:.8333333em;line-height:1}.sm\:prose-lg h2{font-size:1.6666667em;margin-top:1.8666667em;margin-bottom:1.0666667em;line-height:1.3333333}.sm\:prose-lg h3{font-size:1.3333333em;margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.sm\:prose-lg h4{margin-top:1.7777778em;margin-bottom:.4444444em;line-height:1.5555556}.sm\:prose-lg figure,.sm\:prose-lg img,.sm\:prose-lg video{margin-top:1.7777778em;margin-bottom:1.7777778em}.sm\:prose-lg figure>*{margin-top:0;margin-bottom:0}.sm\:prose-lg figure figcaption{font-size:.8888889em;line-height:1.5;margin-top:1em}.sm\:prose-lg code{font-size:.8888889em}.sm\:prose-lg h2 code{font-size:.8666667em}.sm\:prose-lg h3 code{font-size:.875em}.sm\:prose-lg pre{font-size:.8888889em;line-height:1.75;margin-top:2em;margin-bottom:2em;border-radius:.375rem;padding:1em 1.5em}.sm\:prose-lg ol,.sm\:prose-lg ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.sm\:prose-lg li{margin-top:.6666667em;margin-bottom:.6666667em}.sm\:prose-lg ol>li{padding-left:1.6666667em}.sm\:prose-lg ol>li:before{left:0}.sm\:prose-lg ul>li{padding-left:1.6666667em}.sm\:prose-lg ul>li:before{width:.3333333em;height:.3333333em;top:.72222em;left:.2222222em}.sm\:prose-lg>ul>li p{margin-top:.8888889em;margin-bottom:.8888889em}.sm\:prose-lg>ul>li>:first-child{margin-top:1.3333333em}.sm\:prose-lg>ul>li>:last-child{margin-bottom:1.3333333em}.sm\:prose-lg>ol>li>:first-child{margin-top:1.3333333em}.sm\:prose-lg>ol>li>:last-child{margin-bottom:1.3333333em}.sm\:prose-lg ol ol,.sm\:prose-lg ol ul,.sm\:prose-lg ul ol,.sm\:prose-lg ul ul{margin-top:.8888889em;margin-bottom:.8888889em}.sm\:prose-lg hr{margin-top:3.1111111em;margin-bottom:3.1111111em}.sm\:prose-lg hr+*{margin-top:0}.sm\:prose-lg h2+*{margin-top:0}.sm\:prose-lg h3+*{margin-top:0}.sm\:prose-lg h4+*{margin-top:0}.sm\:prose-lg table{font-size:.8888889em;line-height:1.5}.sm\:prose-lg thead th{padding-right:.75em;padding-bottom:.75em;padding-left:.75em}.sm\:prose-lg thead th:first-child{padding-left:0}.sm\:prose-lg thead th:last-child{padding-right:0}.sm\:prose-lg tbody td{padding:.75em}.sm\:prose-lg tbody td:first-child{padding-left:0}.sm\:prose-lg tbody td:last-child{padding-right:0}.sm\:prose-lg>:first-child{margin-top:0}.sm\:prose-lg>:last-child{margin-bottom:0}.sm\:prose-xl{font-size:1.25rem;line-height:1.8}.sm\:prose-xl p{margin-top:1.2em;margin-bottom:1.2em}.sm\:prose-xl [class~=lead]{font-size:1.2em;line-height:1.5;margin-top:1em;margin-bottom:1em}.sm\:prose-xl blockquote{margin-top:1.6em;margin-bottom:1.6em;padding-left:1.0666667em}.sm\:prose-xl h1{font-size:2.8em;margin-top:0;margin-bottom:.8571429em;line-height:1}.sm\:prose-xl h2{font-size:1.8em;margin-top:1.5555556em;margin-bottom:.8888889em;line-height:1.1111111}.sm\:prose-xl h3{font-size:1.5em;margin-top:1.6em;margin-bottom:.6666667em;line-height:1.3333333}.sm\:prose-xl h4{margin-top:1.8em;margin-bottom:.6em;line-height:1.6}.sm\:prose-xl figure,.sm\:prose-xl img,.sm\:prose-xl video{margin-top:2em;margin-bottom:2em}.sm\:prose-xl figure>*{margin-top:0;margin-bottom:0}.sm\:prose-xl figure figcaption{font-size:.9em;line-height:1.5555556;margin-top:1em}.sm\:prose-xl code{font-size:.9em}.sm\:prose-xl h2 code{font-size:.8611111em}.sm\:prose-xl h3 code{font-size:.9em}.sm\:prose-xl pre{font-size:.9em;line-height:1.7777778;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.1111111em 1.3333333em}.sm\:prose-xl ol,.sm\:prose-xl ul{margin-top:1.2em;margin-bottom:1.2em}.sm\:prose-xl li{margin-top:.6em;margin-bottom:.6em}.sm\:prose-xl ol>li{padding-left:1.8em}.sm\:prose-xl ol>li:before{left:0}.sm\:prose-xl ul>li{padding-left:1.8em}.sm\:prose-xl ul>li:before{width:.35em;height:.35em;top:.725em;left:.25em}.sm\:prose-xl>ul>li p{margin-top:.8em;margin-bottom:.8em}.sm\:prose-xl>ul>li>:first-child{margin-top:1.2em}.sm\:prose-xl>ul>li>:last-child{margin-bottom:1.2em}.sm\:prose-xl>ol>li>:first-child{margin-top:1.2em}.sm\:prose-xl>ol>li>:last-child{margin-bottom:1.2em}.sm\:prose-xl ol ol,.sm\:prose-xl ol ul,.sm\:prose-xl ul ol,.sm\:prose-xl ul ul{margin-top:.8em;margin-bottom:.8em}.sm\:prose-xl hr{margin-top:2.8em;margin-bottom:2.8em}.sm\:prose-xl hr+*{margin-top:0}.sm\:prose-xl h2+*{margin-top:0}.sm\:prose-xl h3+*{margin-top:0}.sm\:prose-xl h4+*{margin-top:0}.sm\:prose-xl table{font-size:.9em;line-height:1.5555556}.sm\:prose-xl thead th{padding-right:.6666667em;padding-bottom:.8888889em;padding-left:.6666667em}.sm\:prose-xl thead th:first-child{padding-left:0}.sm\:prose-xl thead th:last-child{padding-right:0}.sm\:prose-xl tbody td{padding:.8888889em .6666667em}.sm\:prose-xl tbody td:first-child{padding-left:0}.sm\:prose-xl tbody td:last-child{padding-right:0}.sm\:prose-xl>:first-child{margin-top:0}.sm\:prose-xl>:last-child{margin-bottom:0}.sm\:prose-2xl{font-size:1.5rem;line-height:1.6666667}.sm\:prose-2xl p{margin-top:1.3333333em;margin-bottom:1.3333333em}.sm\:prose-2xl [class~=lead]{font-size:1.25em;line-height:1.4666667;margin-top:1.0666667em;margin-bottom:1.0666667em}.sm\:prose-2xl blockquote{margin-top:1.7777778em;margin-bottom:1.7777778em;padding-left:1.1111111em}.sm\:prose-2xl h1{font-size:2.6666667em;margin-top:0;margin-bottom:.875em;line-height:1}.sm\:prose-2xl h2{font-size:2em;margin-top:1.5em;margin-bottom:.8333333em;line-height:1.0833333}.sm\:prose-2xl h3{font-size:1.5em;margin-top:1.5555556em;margin-bottom:.6666667em;line-height:1.2222222}.sm\:prose-2xl h4{margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.sm\:prose-2xl figure,.sm\:prose-2xl img,.sm\:prose-2xl video{margin-top:2em;margin-bottom:2em}.sm\:prose-2xl figure>*{margin-top:0;margin-bottom:0}.sm\:prose-2xl figure figcaption{font-size:.8333333em;line-height:1.6;margin-top:1em}.sm\:prose-2xl code{font-size:.8333333em}.sm\:prose-2xl h2 code{font-size:.875em}.sm\:prose-2xl h3 code{font-size:.8888889em}.sm\:prose-2xl pre{font-size:.8333333em;line-height:1.8;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.2em 1.6em}.sm\:prose-2xl ol,.sm\:prose-2xl ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.sm\:prose-2xl li{margin-top:.5em;margin-bottom:.5em}.sm\:prose-2xl ol>li{padding-left:1.6666667em}.sm\:prose-2xl ol>li:before{left:0}.sm\:prose-2xl ul>li{padding-left:1.6666667em}.sm\:prose-2xl ul>li:before{width:.3333333em;height:.3333333em;top:.66667em;left:.25em}.sm\:prose-2xl>ul>li p{margin-top:.8333333em;margin-bottom:.8333333em}.sm\:prose-2xl>ul>li>:first-child{margin-top:1.3333333em}.sm\:prose-2xl>ul>li>:last-child{margin-bottom:1.3333333em}.sm\:prose-2xl>ol>li>:first-child{margin-top:1.3333333em}.sm\:prose-2xl>ol>li>:last-child{margin-bottom:1.3333333em}.sm\:prose-2xl ol ol,.sm\:prose-2xl ol ul,.sm\:prose-2xl ul ol,.sm\:prose-2xl ul ul{margin-top:.6666667em;margin-bottom:.6666667em}.sm\:prose-2xl hr{margin-top:3em;margin-bottom:3em}.sm\:prose-2xl hr+*{margin-top:0}.sm\:prose-2xl h2+*{margin-top:0}.sm\:prose-2xl h3+*{margin-top:0}.sm\:prose-2xl h4+*{margin-top:0}.sm\:prose-2xl table{font-size:.8333333em;line-height:1.4}.sm\:prose-2xl thead th{padding-right:.6em;padding-bottom:.8em;padding-left:.6em}.sm\:prose-2xl thead th:first-child{padding-left:0}.sm\:prose-2xl thead th:last-child{padding-right:0}.sm\:prose-2xl tbody td{padding:.8em .6em}.sm\:prose-2xl tbody td:first-child{padding-left:0}.sm\:prose-2xl tbody td:last-child{padding-right:0}.sm\:prose-2xl>:first-child{margin-top:0}.sm\:prose-2xl>:last-child{margin-bottom:0}.sm\:prose-dark{color:#e2e8f0}.sm\:prose-dark blockquote{color:#a0aec0}.sm\:prose-dark h1,.sm\:prose-dark h2,.sm\:prose-dark h3,.sm\:prose-dark h4,.sm\:prose-dark h5,.sm\:prose-dark h6{color:#e2e8f0}.sm\:prose-dark figcaption{color:#a0aec0}.sm\:prose-dark thead{color:#e2e8f0}}@media (min-width:768px){.md\:container{width:100%}@media (min-width:640px){.md\:container{max-width:640px}}@media (min-width:768px){.md\:container{max-width:768px}}@media (min-width:1024px){.md\:container{max-width:1024px}}@media (min-width:1280px){.md\:container{max-width:1280px}}.md\:prose{color:#4a5568;max-width:65ch;font-size:1rem;line-height:1.75}.md\:prose [class~=lead]{color:#4a5568;font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.md\:prose a{color:#9b2c2c;text-decoration:none}.md\:prose strong{color:#1a202c;font-weight:600}.md\:prose ol{counter-reset:list-counter;margin-top:1.25em;margin-bottom:1.25em}.md\:prose ol>li{position:relative;counter-increment:list-counter;padding-left:1.75em}.md\:prose ol>li:before{content:counter(list-counter) ".";position:absolute;font-weight:400;color:#718096}.md\:prose ul>li{position:relative;padding-left:1.75em}.md\:prose ul>li:before{content:"";position:absolute;background-color:#cbd5e0;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.md\:prose hr{border-color:#e2e8f0;border-top-width:1px;margin-top:3em;margin-bottom:3em}.md\:prose blockquote{font-weight:500;font-style:italic;color:#1a202c;border-left-width:.25rem;border-left-color:#9f7aea;quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.md\:prose blockquote p:first-of-type:before{content:open-quote}.md\:prose blockquote p:last-of-type:after{content:close-quote}.md\:prose h1{color:#1a202c;font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.md\:prose h2{color:#1a202c;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.md\:prose h3{font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.md\:prose h3,.md\:prose h4{color:#1a202c;font-weight:600}.md\:prose h4{margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.md\:prose figure figcaption{color:#718096;font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.md\:prose code{font-size:.875em}.md\:prose pre{overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.md\:prose pre code{border-width:0;border-radius:0;padding:0;font-weight:400}.md\:prose table{width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.md\:prose thead{color:#1a202c;font-weight:600;border-bottom-width:1px;border-bottom-color:#cbd5e0}.md\:prose thead th{vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}.md\:prose tbody tr{border-bottom-width:1px;border-bottom-color:#e2e8f0}.md\:prose tbody tr:last-child{border-bottom-width:0}.md\:prose tbody td{vertical-align:top;padding:.5714286em}.md\:prose p{margin-top:1.25em;margin-bottom:1.25em}.md\:prose figure,.md\:prose img,.md\:prose video{margin-top:2em;margin-bottom:2em}.md\:prose figure>*{margin-top:0;margin-bottom:0}.md\:prose h2 code{font-size:.875em}.md\:prose h3 code{font-size:.9em}.md\:prose ul{margin-top:1.25em;margin-bottom:1.25em}.md\:prose li{margin-top:.5em;margin-bottom:.5em}.md\:prose ol>li:before{left:0}.md\:prose>ul>li p{margin-top:.75em;margin-bottom:.75em}.md\:prose>ul>li>:first-child{margin-top:1.25em}.md\:prose>ul>li>:last-child{margin-bottom:1.25em}.md\:prose>ol>li>:first-child{margin-top:1.25em}.md\:prose>ol>li>:last-child{margin-bottom:1.25em}.md\:prose ol ol,.md\:prose ol ul,.md\:prose ul ol,.md\:prose ul ul{margin-top:.75em;margin-bottom:.75em}.md\:prose hr+*{margin-top:0}.md\:prose h2+*{margin-top:0}.md\:prose h3+*{margin-top:0}.md\:prose h4+*{margin-top:0}.md\:prose thead th:first-child{padding-left:0}.md\:prose thead th:last-child{padding-right:0}.md\:prose tbody td:first-child{padding-left:0}.md\:prose tbody td:last-child{padding-right:0}.md\:prose>:first-child{margin-top:0}.md\:prose>:last-child{margin-bottom:0}.md\:prose-sm{font-size:.875rem;line-height:1.7142857}.md\:prose-sm p{margin-top:1.1428571em;margin-bottom:1.1428571em}.md\:prose-sm [class~=lead]{font-size:1.2857143em;line-height:1.5555556;margin-top:.8888889em;margin-bottom:.8888889em}.md\:prose-sm blockquote{margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.1111111em}.md\:prose-sm h1{font-size:2.1428571em;margin-top:0;margin-bottom:.8em;line-height:1.2}.md\:prose-sm h2{font-size:1.4285714em;margin-top:1.6em;margin-bottom:.8em;line-height:1.4}.md\:prose-sm h3{font-size:1.2857143em;margin-top:1.5555556em;margin-bottom:.4444444em;line-height:1.5555556}.md\:prose-sm h4{margin-top:1.4285714em;margin-bottom:.5714286em;line-height:1.4285714}.md\:prose-sm figure,.md\:prose-sm img,.md\:prose-sm video{margin-top:1.7142857em;margin-bottom:1.7142857em}.md\:prose-sm figure>*{margin-top:0;margin-bottom:0}.md\:prose-sm figure figcaption{font-size:.8571429em;line-height:1.3333333;margin-top:.6666667em}.md\:prose-sm code{font-size:.8571429em}.md\:prose-sm h2 code{font-size:.9em}.md\:prose-sm h3 code{font-size:.8888889em}.md\:prose-sm pre{font-size:.8571429em;line-height:1.6666667;margin-top:1.6666667em;margin-bottom:1.6666667em;border-radius:.25rem;padding:.6666667em 1em}.md\:prose-sm ol,.md\:prose-sm ul{margin-top:1.1428571em;margin-bottom:1.1428571em}.md\:prose-sm li{margin-top:.2857143em;margin-bottom:.2857143em}.md\:prose-sm ol>li{padding-left:1.5714286em}.md\:prose-sm ol>li:before{left:0}.md\:prose-sm ul>li{padding-left:1.5714286em}.md\:prose-sm ul>li:before{height:.3571429em;width:.3571429em;top:.67857em;left:.2142857em}.md\:prose-sm>ul>li p{margin-top:.5714286em;margin-bottom:.5714286em}.md\:prose-sm>ul>li>:first-child{margin-top:1.1428571em}.md\:prose-sm>ul>li>:last-child{margin-bottom:1.1428571em}.md\:prose-sm>ol>li>:first-child{margin-top:1.1428571em}.md\:prose-sm>ol>li>:last-child{margin-bottom:1.1428571em}.md\:prose-sm ol ol,.md\:prose-sm ol ul,.md\:prose-sm ul ol,.md\:prose-sm ul ul{margin-top:.5714286em;margin-bottom:.5714286em}.md\:prose-sm hr{margin-top:2.8571429em;margin-bottom:2.8571429em}.md\:prose-sm hr+*{margin-top:0}.md\:prose-sm h2+*{margin-top:0}.md\:prose-sm h3+*{margin-top:0}.md\:prose-sm h4+*{margin-top:0}.md\:prose-sm table{font-size:.8571429em;line-height:1.5}.md\:prose-sm thead th{padding-right:1em;padding-bottom:.6666667em;padding-left:1em}.md\:prose-sm thead th:first-child{padding-left:0}.md\:prose-sm thead th:last-child{padding-right:0}.md\:prose-sm tbody td{padding:.6666667em 1em}.md\:prose-sm tbody td:first-child{padding-left:0}.md\:prose-sm tbody td:last-child{padding-right:0}.md\:prose-sm>:first-child{margin-top:0}.md\:prose-sm>:last-child{margin-bottom:0}.md\:prose-lg{font-size:1.125rem;line-height:1.7777778}.md\:prose-lg p{margin-top:1.3333333em;margin-bottom:1.3333333em}.md\:prose-lg [class~=lead]{font-size:1.2222222em;line-height:1.4545455;margin-top:1.0909091em;margin-bottom:1.0909091em}.md\:prose-lg blockquote{margin-top:1.6666667em;margin-bottom:1.6666667em;padding-left:1em}.md\:prose-lg h1{font-size:2.6666667em;margin-top:0;margin-bottom:.8333333em;line-height:1}.md\:prose-lg h2{font-size:1.6666667em;margin-top:1.8666667em;margin-bottom:1.0666667em;line-height:1.3333333}.md\:prose-lg h3{font-size:1.3333333em;margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.md\:prose-lg h4{margin-top:1.7777778em;margin-bottom:.4444444em;line-height:1.5555556}.md\:prose-lg figure,.md\:prose-lg img,.md\:prose-lg video{margin-top:1.7777778em;margin-bottom:1.7777778em}.md\:prose-lg figure>*{margin-top:0;margin-bottom:0}.md\:prose-lg figure figcaption{font-size:.8888889em;line-height:1.5;margin-top:1em}.md\:prose-lg code{font-size:.8888889em}.md\:prose-lg h2 code{font-size:.8666667em}.md\:prose-lg h3 code{font-size:.875em}.md\:prose-lg pre{font-size:.8888889em;line-height:1.75;margin-top:2em;margin-bottom:2em;border-radius:.375rem;padding:1em 1.5em}.md\:prose-lg ol,.md\:prose-lg ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.md\:prose-lg li{margin-top:.6666667em;margin-bottom:.6666667em}.md\:prose-lg ol>li{padding-left:1.6666667em}.md\:prose-lg ol>li:before{left:0}.md\:prose-lg ul>li{padding-left:1.6666667em}.md\:prose-lg ul>li:before{width:.3333333em;height:.3333333em;top:.72222em;left:.2222222em}.md\:prose-lg>ul>li p{margin-top:.8888889em;margin-bottom:.8888889em}.md\:prose-lg>ul>li>:first-child{margin-top:1.3333333em}.md\:prose-lg>ul>li>:last-child{margin-bottom:1.3333333em}.md\:prose-lg>ol>li>:first-child{margin-top:1.3333333em}.md\:prose-lg>ol>li>:last-child{margin-bottom:1.3333333em}.md\:prose-lg ol ol,.md\:prose-lg ol ul,.md\:prose-lg ul ol,.md\:prose-lg ul ul{margin-top:.8888889em;margin-bottom:.8888889em}.md\:prose-lg hr{margin-top:3.1111111em;margin-bottom:3.1111111em}.md\:prose-lg hr+*{margin-top:0}.md\:prose-lg h2+*{margin-top:0}.md\:prose-lg h3+*{margin-top:0}.md\:prose-lg h4+*{margin-top:0}.md\:prose-lg table{font-size:.8888889em;line-height:1.5}.md\:prose-lg thead th{padding-right:.75em;padding-bottom:.75em;padding-left:.75em}.md\:prose-lg thead th:first-child{padding-left:0}.md\:prose-lg thead th:last-child{padding-right:0}.md\:prose-lg tbody td{padding:.75em}.md\:prose-lg tbody td:first-child{padding-left:0}.md\:prose-lg tbody td:last-child{padding-right:0}.md\:prose-lg>:first-child{margin-top:0}.md\:prose-lg>:last-child{margin-bottom:0}.md\:prose-xl{font-size:1.25rem;line-height:1.8}.md\:prose-xl p{margin-top:1.2em;margin-bottom:1.2em}.md\:prose-xl [class~=lead]{font-size:1.2em;line-height:1.5;margin-top:1em;margin-bottom:1em}.md\:prose-xl blockquote{margin-top:1.6em;margin-bottom:1.6em;padding-left:1.0666667em}.md\:prose-xl h1{font-size:2.8em;margin-top:0;margin-bottom:.8571429em;line-height:1}.md\:prose-xl h2{font-size:1.8em;margin-top:1.5555556em;margin-bottom:.8888889em;line-height:1.1111111}.md\:prose-xl h3{font-size:1.5em;margin-top:1.6em;margin-bottom:.6666667em;line-height:1.3333333}.md\:prose-xl h4{margin-top:1.8em;margin-bottom:.6em;line-height:1.6}.md\:prose-xl figure,.md\:prose-xl img,.md\:prose-xl video{margin-top:2em;margin-bottom:2em}.md\:prose-xl figure>*{margin-top:0;margin-bottom:0}.md\:prose-xl figure figcaption{font-size:.9em;line-height:1.5555556;margin-top:1em}.md\:prose-xl code{font-size:.9em}.md\:prose-xl h2 code{font-size:.8611111em}.md\:prose-xl h3 code{font-size:.9em}.md\:prose-xl pre{font-size:.9em;line-height:1.7777778;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.1111111em 1.3333333em}.md\:prose-xl ol,.md\:prose-xl ul{margin-top:1.2em;margin-bottom:1.2em}.md\:prose-xl li{margin-top:.6em;margin-bottom:.6em}.md\:prose-xl ol>li{padding-left:1.8em}.md\:prose-xl ol>li:before{left:0}.md\:prose-xl ul>li{padding-left:1.8em}.md\:prose-xl ul>li:before{width:.35em;height:.35em;top:.725em;left:.25em}.md\:prose-xl>ul>li p{margin-top:.8em;margin-bottom:.8em}.md\:prose-xl>ul>li>:first-child{margin-top:1.2em}.md\:prose-xl>ul>li>:last-child{margin-bottom:1.2em}.md\:prose-xl>ol>li>:first-child{margin-top:1.2em}.md\:prose-xl>ol>li>:last-child{margin-bottom:1.2em}.md\:prose-xl ol ol,.md\:prose-xl ol ul,.md\:prose-xl ul ol,.md\:prose-xl ul ul{margin-top:.8em;margin-bottom:.8em}.md\:prose-xl hr{margin-top:2.8em;margin-bottom:2.8em}.md\:prose-xl hr+*{margin-top:0}.md\:prose-xl h2+*{margin-top:0}.md\:prose-xl h3+*{margin-top:0}.md\:prose-xl h4+*{margin-top:0}.md\:prose-xl table{font-size:.9em;line-height:1.5555556}.md\:prose-xl thead th{padding-right:.6666667em;padding-bottom:.8888889em;padding-left:.6666667em}.md\:prose-xl thead th:first-child{padding-left:0}.md\:prose-xl thead th:last-child{padding-right:0}.md\:prose-xl tbody td{padding:.8888889em .6666667em}.md\:prose-xl tbody td:first-child{padding-left:0}.md\:prose-xl tbody td:last-child{padding-right:0}.md\:prose-xl>:first-child{margin-top:0}.md\:prose-xl>:last-child{margin-bottom:0}.md\:prose-2xl{font-size:1.5rem;line-height:1.6666667}.md\:prose-2xl p{margin-top:1.3333333em;margin-bottom:1.3333333em}.md\:prose-2xl [class~=lead]{font-size:1.25em;line-height:1.4666667;margin-top:1.0666667em;margin-bottom:1.0666667em}.md\:prose-2xl blockquote{margin-top:1.7777778em;margin-bottom:1.7777778em;padding-left:1.1111111em}.md\:prose-2xl h1{font-size:2.6666667em;margin-top:0;margin-bottom:.875em;line-height:1}.md\:prose-2xl h2{font-size:2em;margin-top:1.5em;margin-bottom:.8333333em;line-height:1.0833333}.md\:prose-2xl h3{font-size:1.5em;margin-top:1.5555556em;margin-bottom:.6666667em;line-height:1.2222222}.md\:prose-2xl h4{margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.md\:prose-2xl figure,.md\:prose-2xl img,.md\:prose-2xl video{margin-top:2em;margin-bottom:2em}.md\:prose-2xl figure>*{margin-top:0;margin-bottom:0}.md\:prose-2xl figure figcaption{font-size:.8333333em;line-height:1.6;margin-top:1em}.md\:prose-2xl code{font-size:.8333333em}.md\:prose-2xl h2 code{font-size:.875em}.md\:prose-2xl h3 code{font-size:.8888889em}.md\:prose-2xl pre{font-size:.8333333em;line-height:1.8;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.2em 1.6em}.md\:prose-2xl ol,.md\:prose-2xl ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.md\:prose-2xl li{margin-top:.5em;margin-bottom:.5em}.md\:prose-2xl ol>li{padding-left:1.6666667em}.md\:prose-2xl ol>li:before{left:0}.md\:prose-2xl ul>li{padding-left:1.6666667em}.md\:prose-2xl ul>li:before{width:.3333333em;height:.3333333em;top:.66667em;left:.25em}.md\:prose-2xl>ul>li p{margin-top:.8333333em;margin-bottom:.8333333em}.md\:prose-2xl>ul>li>:first-child{margin-top:1.3333333em}.md\:prose-2xl>ul>li>:last-child{margin-bottom:1.3333333em}.md\:prose-2xl>ol>li>:first-child{margin-top:1.3333333em}.md\:prose-2xl>ol>li>:last-child{margin-bottom:1.3333333em}.md\:prose-2xl ol ol,.md\:prose-2xl ol ul,.md\:prose-2xl ul ol,.md\:prose-2xl ul ul{margin-top:.6666667em;margin-bottom:.6666667em}.md\:prose-2xl hr{margin-top:3em;margin-bottom:3em}.md\:prose-2xl hr+*{margin-top:0}.md\:prose-2xl h2+*{margin-top:0}.md\:prose-2xl h3+*{margin-top:0}.md\:prose-2xl h4+*{margin-top:0}.md\:prose-2xl table{font-size:.8333333em;line-height:1.4}.md\:prose-2xl thead th{padding-right:.6em;padding-bottom:.8em;padding-left:.6em}.md\:prose-2xl thead th:first-child{padding-left:0}.md\:prose-2xl thead th:last-child{padding-right:0}.md\:prose-2xl tbody td{padding:.8em .6em}.md\:prose-2xl tbody td:first-child{padding-left:0}.md\:prose-2xl tbody td:last-child{padding-right:0}.md\:prose-2xl>:first-child{margin-top:0}.md\:prose-2xl>:last-child{margin-bottom:0}.md\:prose-dark{color:#e2e8f0}.md\:prose-dark blockquote{color:#a0aec0}.md\:prose-dark h1,.md\:prose-dark h2,.md\:prose-dark h3,.md\:prose-dark h4,.md\:prose-dark h5,.md\:prose-dark h6{color:#e2e8f0}.md\:prose-dark figcaption{color:#a0aec0}.md\:prose-dark thead{color:#e2e8f0}.md\:font-extrabold{font-weight:800}.md\:text-4xl{font-size:2.25rem}.md\:ml-4{margin-left:1rem}.md\:w-24{width:6rem}}@media (min-width:1024px){.lg\:container{width:100%}@media (min-width:640px){.lg\:container{max-width:640px}}@media (min-width:768px){.lg\:container{max-width:768px}}@media (min-width:1024px){.lg\:container{max-width:1024px}}@media (min-width:1280px){.lg\:container{max-width:1280px}}.lg\:prose{color:#4a5568;max-width:65ch;font-size:1rem;line-height:1.75}.lg\:prose [class~=lead]{color:#4a5568;font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.lg\:prose a{color:#9b2c2c;text-decoration:none}.lg\:prose strong{color:#1a202c;font-weight:600}.lg\:prose ol{counter-reset:list-counter;margin-top:1.25em;margin-bottom:1.25em}.lg\:prose ol>li{position:relative;counter-increment:list-counter;padding-left:1.75em}.lg\:prose ol>li:before{content:counter(list-counter) ".";position:absolute;font-weight:400;color:#718096}.lg\:prose ul>li{position:relative;padding-left:1.75em}.lg\:prose ul>li:before{content:"";position:absolute;background-color:#cbd5e0;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.lg\:prose hr{border-color:#e2e8f0;border-top-width:1px;margin-top:3em;margin-bottom:3em}.lg\:prose blockquote{font-weight:500;font-style:italic;color:#1a202c;border-left-width:.25rem;border-left-color:#9f7aea;quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.lg\:prose blockquote p:first-of-type:before{content:open-quote}.lg\:prose blockquote p:last-of-type:after{content:close-quote}.lg\:prose h1{color:#1a202c;font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.lg\:prose h2{color:#1a202c;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.lg\:prose h3{font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.lg\:prose h3,.lg\:prose h4{color:#1a202c;font-weight:600}.lg\:prose h4{margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.lg\:prose figure figcaption{color:#718096;font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.lg\:prose code{font-size:.875em}.lg\:prose pre{overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.lg\:prose pre code{border-width:0;border-radius:0;padding:0;font-weight:400}.lg\:prose table{width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.lg\:prose thead{color:#1a202c;font-weight:600;border-bottom-width:1px;border-bottom-color:#cbd5e0}.lg\:prose thead th{vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}.lg\:prose tbody tr{border-bottom-width:1px;border-bottom-color:#e2e8f0}.lg\:prose tbody tr:last-child{border-bottom-width:0}.lg\:prose tbody td{vertical-align:top;padding:.5714286em}.lg\:prose p{margin-top:1.25em;margin-bottom:1.25em}.lg\:prose figure,.lg\:prose img,.lg\:prose video{margin-top:2em;margin-bottom:2em}.lg\:prose figure>*{margin-top:0;margin-bottom:0}.lg\:prose h2 code{font-size:.875em}.lg\:prose h3 code{font-size:.9em}.lg\:prose ul{margin-top:1.25em;margin-bottom:1.25em}.lg\:prose li{margin-top:.5em;margin-bottom:.5em}.lg\:prose ol>li:before{left:0}.lg\:prose>ul>li p{margin-top:.75em;margin-bottom:.75em}.lg\:prose>ul>li>:first-child{margin-top:1.25em}.lg\:prose>ul>li>:last-child{margin-bottom:1.25em}.lg\:prose>ol>li>:first-child{margin-top:1.25em}.lg\:prose>ol>li>:last-child{margin-bottom:1.25em}.lg\:prose ol ol,.lg\:prose ol ul,.lg\:prose ul ol,.lg\:prose ul ul{margin-top:.75em;margin-bottom:.75em}.lg\:prose hr+*{margin-top:0}.lg\:prose h2+*{margin-top:0}.lg\:prose h3+*{margin-top:0}.lg\:prose h4+*{margin-top:0}.lg\:prose thead th:first-child{padding-left:0}.lg\:prose thead th:last-child{padding-right:0}.lg\:prose tbody td:first-child{padding-left:0}.lg\:prose tbody td:last-child{padding-right:0}.lg\:prose>:first-child{margin-top:0}.lg\:prose>:last-child{margin-bottom:0}.lg\:prose-sm{font-size:.875rem;line-height:1.7142857}.lg\:prose-sm p{margin-top:1.1428571em;margin-bottom:1.1428571em}.lg\:prose-sm [class~=lead]{font-size:1.2857143em;line-height:1.5555556;margin-top:.8888889em;margin-bottom:.8888889em}.lg\:prose-sm blockquote{margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.1111111em}.lg\:prose-sm h1{font-size:2.1428571em;margin-top:0;margin-bottom:.8em;line-height:1.2}.lg\:prose-sm h2{font-size:1.4285714em;margin-top:1.6em;margin-bottom:.8em;line-height:1.4}.lg\:prose-sm h3{font-size:1.2857143em;margin-top:1.5555556em;margin-bottom:.4444444em;line-height:1.5555556}.lg\:prose-sm h4{margin-top:1.4285714em;margin-bottom:.5714286em;line-height:1.4285714}.lg\:prose-sm figure,.lg\:prose-sm img,.lg\:prose-sm video{margin-top:1.7142857em;margin-bottom:1.7142857em}.lg\:prose-sm figure>*{margin-top:0;margin-bottom:0}.lg\:prose-sm figure figcaption{font-size:.8571429em;line-height:1.3333333;margin-top:.6666667em}.lg\:prose-sm code{font-size:.8571429em}.lg\:prose-sm h2 code{font-size:.9em}.lg\:prose-sm h3 code{font-size:.8888889em}.lg\:prose-sm pre{font-size:.8571429em;line-height:1.6666667;margin-top:1.6666667em;margin-bottom:1.6666667em;border-radius:.25rem;padding:.6666667em 1em}.lg\:prose-sm ol,.lg\:prose-sm ul{margin-top:1.1428571em;margin-bottom:1.1428571em}.lg\:prose-sm li{margin-top:.2857143em;margin-bottom:.2857143em}.lg\:prose-sm ol>li{padding-left:1.5714286em}.lg\:prose-sm ol>li:before{left:0}.lg\:prose-sm ul>li{padding-left:1.5714286em}.lg\:prose-sm ul>li:before{height:.3571429em;width:.3571429em;top:.67857em;left:.2142857em}.lg\:prose-sm>ul>li p{margin-top:.5714286em;margin-bottom:.5714286em}.lg\:prose-sm>ul>li>:first-child{margin-top:1.1428571em}.lg\:prose-sm>ul>li>:last-child{margin-bottom:1.1428571em}.lg\:prose-sm>ol>li>:first-child{margin-top:1.1428571em}.lg\:prose-sm>ol>li>:last-child{margin-bottom:1.1428571em}.lg\:prose-sm ol ol,.lg\:prose-sm ol ul,.lg\:prose-sm ul ol,.lg\:prose-sm ul ul{margin-top:.5714286em;margin-bottom:.5714286em}.lg\:prose-sm hr{margin-top:2.8571429em;margin-bottom:2.8571429em}.lg\:prose-sm hr+*{margin-top:0}.lg\:prose-sm h2+*{margin-top:0}.lg\:prose-sm h3+*{margin-top:0}.lg\:prose-sm h4+*{margin-top:0}.lg\:prose-sm table{font-size:.8571429em;line-height:1.5}.lg\:prose-sm thead th{padding-right:1em;padding-bottom:.6666667em;padding-left:1em}.lg\:prose-sm thead th:first-child{padding-left:0}.lg\:prose-sm thead th:last-child{padding-right:0}.lg\:prose-sm tbody td{padding:.6666667em 1em}.lg\:prose-sm tbody td:first-child{padding-left:0}.lg\:prose-sm tbody td:last-child{padding-right:0}.lg\:prose-sm>:first-child{margin-top:0}.lg\:prose-sm>:last-child{margin-bottom:0}.lg\:prose-lg{font-size:1.125rem;line-height:1.7777778}.lg\:prose-lg p{margin-top:1.3333333em;margin-bottom:1.3333333em}.lg\:prose-lg [class~=lead]{font-size:1.2222222em;line-height:1.4545455;margin-top:1.0909091em;margin-bottom:1.0909091em}.lg\:prose-lg blockquote{margin-top:1.6666667em;margin-bottom:1.6666667em;padding-left:1em}.lg\:prose-lg h1{font-size:2.6666667em;margin-top:0;margin-bottom:.8333333em;line-height:1}.lg\:prose-lg h2{font-size:1.6666667em;margin-top:1.8666667em;margin-bottom:1.0666667em;line-height:1.3333333}.lg\:prose-lg h3{font-size:1.3333333em;margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.lg\:prose-lg h4{margin-top:1.7777778em;margin-bottom:.4444444em;line-height:1.5555556}.lg\:prose-lg figure,.lg\:prose-lg img,.lg\:prose-lg video{margin-top:1.7777778em;margin-bottom:1.7777778em}.lg\:prose-lg figure>*{margin-top:0;margin-bottom:0}.lg\:prose-lg figure figcaption{font-size:.8888889em;line-height:1.5;margin-top:1em}.lg\:prose-lg code{font-size:.8888889em}.lg\:prose-lg h2 code{font-size:.8666667em}.lg\:prose-lg h3 code{font-size:.875em}.lg\:prose-lg pre{font-size:.8888889em;line-height:1.75;margin-top:2em;margin-bottom:2em;border-radius:.375rem;padding:1em 1.5em}.lg\:prose-lg ol,.lg\:prose-lg ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.lg\:prose-lg li{margin-top:.6666667em;margin-bottom:.6666667em}.lg\:prose-lg ol>li{padding-left:1.6666667em}.lg\:prose-lg ol>li:before{left:0}.lg\:prose-lg ul>li{padding-left:1.6666667em}.lg\:prose-lg ul>li:before{width:.3333333em;height:.3333333em;top:.72222em;left:.2222222em}.lg\:prose-lg>ul>li p{margin-top:.8888889em;margin-bottom:.8888889em}.lg\:prose-lg>ul>li>:first-child{margin-top:1.3333333em}.lg\:prose-lg>ul>li>:last-child{margin-bottom:1.3333333em}.lg\:prose-lg>ol>li>:first-child{margin-top:1.3333333em}.lg\:prose-lg>ol>li>:last-child{margin-bottom:1.3333333em}.lg\:prose-lg ol ol,.lg\:prose-lg ol ul,.lg\:prose-lg ul ol,.lg\:prose-lg ul ul{margin-top:.8888889em;margin-bottom:.8888889em}.lg\:prose-lg hr{margin-top:3.1111111em;margin-bottom:3.1111111em}.lg\:prose-lg hr+*{margin-top:0}.lg\:prose-lg h2+*{margin-top:0}.lg\:prose-lg h3+*{margin-top:0}.lg\:prose-lg h4+*{margin-top:0}.lg\:prose-lg table{font-size:.8888889em;line-height:1.5}.lg\:prose-lg thead th{padding-right:.75em;padding-bottom:.75em;padding-left:.75em}.lg\:prose-lg thead th:first-child{padding-left:0}.lg\:prose-lg thead th:last-child{padding-right:0}.lg\:prose-lg tbody td{padding:.75em}.lg\:prose-lg tbody td:first-child{padding-left:0}.lg\:prose-lg tbody td:last-child{padding-right:0}.lg\:prose-lg>:first-child{margin-top:0}.lg\:prose-lg>:last-child{margin-bottom:0}.lg\:prose-xl{font-size:1.25rem;line-height:1.8}.lg\:prose-xl p{margin-top:1.2em;margin-bottom:1.2em}.lg\:prose-xl [class~=lead]{font-size:1.2em;line-height:1.5;margin-top:1em;margin-bottom:1em}.lg\:prose-xl blockquote{margin-top:1.6em;margin-bottom:1.6em;padding-left:1.0666667em}.lg\:prose-xl h1{font-size:2.8em;margin-top:0;margin-bottom:.8571429em;line-height:1}.lg\:prose-xl h2{font-size:1.8em;margin-top:1.5555556em;margin-bottom:.8888889em;line-height:1.1111111}.lg\:prose-xl h3{font-size:1.5em;margin-top:1.6em;margin-bottom:.6666667em;line-height:1.3333333}.lg\:prose-xl h4{margin-top:1.8em;margin-bottom:.6em;line-height:1.6}.lg\:prose-xl figure,.lg\:prose-xl img,.lg\:prose-xl video{margin-top:2em;margin-bottom:2em}.lg\:prose-xl figure>*{margin-top:0;margin-bottom:0}.lg\:prose-xl figure figcaption{font-size:.9em;line-height:1.5555556;margin-top:1em}.lg\:prose-xl code{font-size:.9em}.lg\:prose-xl h2 code{font-size:.8611111em}.lg\:prose-xl h3 code{font-size:.9em}.lg\:prose-xl pre{font-size:.9em;line-height:1.7777778;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.1111111em 1.3333333em}.lg\:prose-xl ol,.lg\:prose-xl ul{margin-top:1.2em;margin-bottom:1.2em}.lg\:prose-xl li{margin-top:.6em;margin-bottom:.6em}.lg\:prose-xl ol>li{padding-left:1.8em}.lg\:prose-xl ol>li:before{left:0}.lg\:prose-xl ul>li{padding-left:1.8em}.lg\:prose-xl ul>li:before{width:.35em;height:.35em;top:.725em;left:.25em}.lg\:prose-xl>ul>li p{margin-top:.8em;margin-bottom:.8em}.lg\:prose-xl>ul>li>:first-child{margin-top:1.2em}.lg\:prose-xl>ul>li>:last-child{margin-bottom:1.2em}.lg\:prose-xl>ol>li>:first-child{margin-top:1.2em}.lg\:prose-xl>ol>li>:last-child{margin-bottom:1.2em}.lg\:prose-xl ol ol,.lg\:prose-xl ol ul,.lg\:prose-xl ul ol,.lg\:prose-xl ul ul{margin-top:.8em;margin-bottom:.8em}.lg\:prose-xl hr{margin-top:2.8em;margin-bottom:2.8em}.lg\:prose-xl hr+*{margin-top:0}.lg\:prose-xl h2+*{margin-top:0}.lg\:prose-xl h3+*{margin-top:0}.lg\:prose-xl h4+*{margin-top:0}.lg\:prose-xl table{font-size:.9em;line-height:1.5555556}.lg\:prose-xl thead th{padding-right:.6666667em;padding-bottom:.8888889em;padding-left:.6666667em}.lg\:prose-xl thead th:first-child{padding-left:0}.lg\:prose-xl thead th:last-child{padding-right:0}.lg\:prose-xl tbody td{padding:.8888889em .6666667em}.lg\:prose-xl tbody td:first-child{padding-left:0}.lg\:prose-xl tbody td:last-child{padding-right:0}.lg\:prose-xl>:first-child{margin-top:0}.lg\:prose-xl>:last-child{margin-bottom:0}.lg\:prose-2xl{font-size:1.5rem;line-height:1.6666667}.lg\:prose-2xl p{margin-top:1.3333333em;margin-bottom:1.3333333em}.lg\:prose-2xl [class~=lead]{font-size:1.25em;line-height:1.4666667;margin-top:1.0666667em;margin-bottom:1.0666667em}.lg\:prose-2xl blockquote{margin-top:1.7777778em;margin-bottom:1.7777778em;padding-left:1.1111111em}.lg\:prose-2xl h1{font-size:2.6666667em;margin-top:0;margin-bottom:.875em;line-height:1}.lg\:prose-2xl h2{font-size:2em;margin-top:1.5em;margin-bottom:.8333333em;line-height:1.0833333}.lg\:prose-2xl h3{font-size:1.5em;margin-top:1.5555556em;margin-bottom:.6666667em;line-height:1.2222222}.lg\:prose-2xl h4{margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.lg\:prose-2xl figure,.lg\:prose-2xl img,.lg\:prose-2xl video{margin-top:2em;margin-bottom:2em}.lg\:prose-2xl figure>*{margin-top:0;margin-bottom:0}.lg\:prose-2xl figure figcaption{font-size:.8333333em;line-height:1.6;margin-top:1em}.lg\:prose-2xl code{font-size:.8333333em}.lg\:prose-2xl h2 code{font-size:.875em}.lg\:prose-2xl h3 code{font-size:.8888889em}.lg\:prose-2xl pre{font-size:.8333333em;line-height:1.8;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.2em 1.6em}.lg\:prose-2xl ol,.lg\:prose-2xl ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.lg\:prose-2xl li{margin-top:.5em;margin-bottom:.5em}.lg\:prose-2xl ol>li{padding-left:1.6666667em}.lg\:prose-2xl ol>li:before{left:0}.lg\:prose-2xl ul>li{padding-left:1.6666667em}.lg\:prose-2xl ul>li:before{width:.3333333em;height:.3333333em;top:.66667em;left:.25em}.lg\:prose-2xl>ul>li p{margin-top:.8333333em;margin-bottom:.8333333em}.lg\:prose-2xl>ul>li>:first-child{margin-top:1.3333333em}.lg\:prose-2xl>ul>li>:last-child{margin-bottom:1.3333333em}.lg\:prose-2xl>ol>li>:first-child{margin-top:1.3333333em}.lg\:prose-2xl>ol>li>:last-child{margin-bottom:1.3333333em}.lg\:prose-2xl ol ol,.lg\:prose-2xl ol ul,.lg\:prose-2xl ul ol,.lg\:prose-2xl ul ul{margin-top:.6666667em;margin-bottom:.6666667em}.lg\:prose-2xl hr{margin-top:3em;margin-bottom:3em}.lg\:prose-2xl hr+*{margin-top:0}.lg\:prose-2xl h2+*{margin-top:0}.lg\:prose-2xl h3+*{margin-top:0}.lg\:prose-2xl h4+*{margin-top:0}.lg\:prose-2xl table{font-size:.8333333em;line-height:1.4}.lg\:prose-2xl thead th{padding-right:.6em;padding-bottom:.8em;padding-left:.6em}.lg\:prose-2xl thead th:first-child{padding-left:0}.lg\:prose-2xl thead th:last-child{padding-right:0}.lg\:prose-2xl tbody td{padding:.8em .6em}.lg\:prose-2xl tbody td:first-child{padding-left:0}.lg\:prose-2xl tbody td:last-child{padding-right:0}.lg\:prose-2xl>:first-child{margin-top:0}.lg\:prose-2xl>:last-child{margin-bottom:0}.lg\:prose-dark{color:#e2e8f0}.lg\:prose-dark blockquote{color:#a0aec0}.lg\:prose-dark h1,.lg\:prose-dark h2,.lg\:prose-dark h3,.lg\:prose-dark h4,.lg\:prose-dark h5,.lg\:prose-dark h6{color:#e2e8f0}.lg\:prose-dark figcaption{color:#a0aec0}.lg\:prose-dark thead{color:#e2e8f0}.lg\:inline-block{display:inline-block}.lg\:flex{display:-webkit-box;display:-ms-flexbox;display:flex}.lg\:hidden{display:none}.lg\:items-center{-webkit-box-align:center;-ms-flex-align:center;align-items:center}.lg\:mt-0{margin-top:0}.lg\:w-32{width:8rem}.lg\:w-auto{width:auto}.lg\:w-1\/2{width:50%}}@media (min-width:1280px){.xl\:container{width:100%}@media (min-width:640px){.xl\:container{max-width:640px}}@media (min-width:768px){.xl\:container{max-width:768px}}@media (min-width:1024px){.xl\:container{max-width:1024px}}@media (min-width:1280px){.xl\:container{max-width:1280px}}.xl\:prose{color:#4a5568;max-width:65ch;font-size:1rem;line-height:1.75}.xl\:prose [class~=lead]{color:#4a5568;font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.xl\:prose a{color:#9b2c2c;text-decoration:none}.xl\:prose strong{color:#1a202c;font-weight:600}.xl\:prose ol{counter-reset:list-counter;margin-top:1.25em;margin-bottom:1.25em}.xl\:prose ol>li{position:relative;counter-increment:list-counter;padding-left:1.75em}.xl\:prose ol>li:before{content:counter(list-counter) ".";position:absolute;font-weight:400;color:#718096}.xl\:prose ul>li{position:relative;padding-left:1.75em}.xl\:prose ul>li:before{content:"";position:absolute;background-color:#cbd5e0;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.xl\:prose hr{border-color:#e2e8f0;border-top-width:1px;margin-top:3em;margin-bottom:3em}.xl\:prose blockquote{font-weight:500;font-style:italic;color:#1a202c;border-left-width:.25rem;border-left-color:#9f7aea;quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.xl\:prose blockquote p:first-of-type:before{content:open-quote}.xl\:prose blockquote p:last-of-type:after{content:close-quote}.xl\:prose h1{color:#1a202c;font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.xl\:prose h2{color:#1a202c;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.xl\:prose h3{font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.xl\:prose h3,.xl\:prose h4{color:#1a202c;font-weight:600}.xl\:prose h4{margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.xl\:prose figure figcaption{color:#718096;font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.xl\:prose code{font-size:.875em}.xl\:prose pre{overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.xl\:prose pre code{border-width:0;border-radius:0;padding:0;font-weight:400}.xl\:prose table{width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.xl\:prose thead{color:#1a202c;font-weight:600;border-bottom-width:1px;border-bottom-color:#cbd5e0}.xl\:prose thead th{vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}.xl\:prose tbody tr{border-bottom-width:1px;border-bottom-color:#e2e8f0}.xl\:prose tbody tr:last-child{border-bottom-width:0}.xl\:prose tbody td{vertical-align:top;padding:.5714286em}.xl\:prose p{margin-top:1.25em;margin-bottom:1.25em}.xl\:prose figure,.xl\:prose img,.xl\:prose video{margin-top:2em;margin-bottom:2em}.xl\:prose figure>*{margin-top:0;margin-bottom:0}.xl\:prose h2 code{font-size:.875em}.xl\:prose h3 code{font-size:.9em}.xl\:prose ul{margin-top:1.25em;margin-bottom:1.25em}.xl\:prose li{margin-top:.5em;margin-bottom:.5em}.xl\:prose ol>li:before{left:0}.xl\:prose>ul>li p{margin-top:.75em;margin-bottom:.75em}.xl\:prose>ul>li>:first-child{margin-top:1.25em}.xl\:prose>ul>li>:last-child{margin-bottom:1.25em}.xl\:prose>ol>li>:first-child{margin-top:1.25em}.xl\:prose>ol>li>:last-child{margin-bottom:1.25em}.xl\:prose ol ol,.xl\:prose ol ul,.xl\:prose ul ol,.xl\:prose ul ul{margin-top:.75em;margin-bottom:.75em}.xl\:prose hr+*{margin-top:0}.xl\:prose h2+*{margin-top:0}.xl\:prose h3+*{margin-top:0}.xl\:prose h4+*{margin-top:0}.xl\:prose thead th:first-child{padding-left:0}.xl\:prose thead th:last-child{padding-right:0}.xl\:prose tbody td:first-child{padding-left:0}.xl\:prose tbody td:last-child{padding-right:0}.xl\:prose>:first-child{margin-top:0}.xl\:prose>:last-child{margin-bottom:0}.xl\:prose-sm{font-size:.875rem;line-height:1.7142857}.xl\:prose-sm p{margin-top:1.1428571em;margin-bottom:1.1428571em}.xl\:prose-sm [class~=lead]{font-size:1.2857143em;line-height:1.5555556;margin-top:.8888889em;margin-bottom:.8888889em}.xl\:prose-sm blockquote{margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.1111111em}.xl\:prose-sm h1{font-size:2.1428571em;margin-top:0;margin-bottom:.8em;line-height:1.2}.xl\:prose-sm h2{font-size:1.4285714em;margin-top:1.6em;margin-bottom:.8em;line-height:1.4}.xl\:prose-sm h3{font-size:1.2857143em;margin-top:1.5555556em;margin-bottom:.4444444em;line-height:1.5555556}.xl\:prose-sm h4{margin-top:1.4285714em;margin-bottom:.5714286em;line-height:1.4285714}.xl\:prose-sm figure,.xl\:prose-sm img,.xl\:prose-sm video{margin-top:1.7142857em;margin-bottom:1.7142857em}.xl\:prose-sm figure>*{margin-top:0;margin-bottom:0}.xl\:prose-sm figure figcaption{font-size:.8571429em;line-height:1.3333333;margin-top:.6666667em}.xl\:prose-sm code{font-size:.8571429em}.xl\:prose-sm h2 code{font-size:.9em}.xl\:prose-sm h3 code{font-size:.8888889em}.xl\:prose-sm pre{font-size:.8571429em;line-height:1.6666667;margin-top:1.6666667em;margin-bottom:1.6666667em;border-radius:.25rem;padding:.6666667em 1em}.xl\:prose-sm ol,.xl\:prose-sm ul{margin-top:1.1428571em;margin-bottom:1.1428571em}.xl\:prose-sm li{margin-top:.2857143em;margin-bottom:.2857143em}.xl\:prose-sm ol>li{padding-left:1.5714286em}.xl\:prose-sm ol>li:before{left:0}.xl\:prose-sm ul>li{padding-left:1.5714286em}.xl\:prose-sm ul>li:before{height:.3571429em;width:.3571429em;top:.67857em;left:.2142857em}.xl\:prose-sm>ul>li p{margin-top:.5714286em;margin-bottom:.5714286em}.xl\:prose-sm>ul>li>:first-child{margin-top:1.1428571em}.xl\:prose-sm>ul>li>:last-child{margin-bottom:1.1428571em}.xl\:prose-sm>ol>li>:first-child{margin-top:1.1428571em}.xl\:prose-sm>ol>li>:last-child{margin-bottom:1.1428571em}.xl\:prose-sm ol ol,.xl\:prose-sm ol ul,.xl\:prose-sm ul ol,.xl\:prose-sm ul ul{margin-top:.5714286em;margin-bottom:.5714286em}.xl\:prose-sm hr{margin-top:2.8571429em;margin-bottom:2.8571429em}.xl\:prose-sm hr+*{margin-top:0}.xl\:prose-sm h2+*{margin-top:0}.xl\:prose-sm h3+*{margin-top:0}.xl\:prose-sm h4+*{margin-top:0}.xl\:prose-sm table{font-size:.8571429em;line-height:1.5}.xl\:prose-sm thead th{padding-right:1em;padding-bottom:.6666667em;padding-left:1em}.xl\:prose-sm thead th:first-child{padding-left:0}.xl\:prose-sm thead th:last-child{padding-right:0}.xl\:prose-sm tbody td{padding:.6666667em 1em}.xl\:prose-sm tbody td:first-child{padding-left:0}.xl\:prose-sm tbody td:last-child{padding-right:0}.xl\:prose-sm>:first-child{margin-top:0}.xl\:prose-sm>:last-child{margin-bottom:0}.xl\:prose-lg{font-size:1.125rem;line-height:1.7777778}.xl\:prose-lg p{margin-top:1.3333333em;margin-bottom:1.3333333em}.xl\:prose-lg [class~=lead]{font-size:1.2222222em;line-height:1.4545455;margin-top:1.0909091em;margin-bottom:1.0909091em}.xl\:prose-lg blockquote{margin-top:1.6666667em;margin-bottom:1.6666667em;padding-left:1em}.xl\:prose-lg h1{font-size:2.6666667em;margin-top:0;margin-bottom:.8333333em;line-height:1}.xl\:prose-lg h2{font-size:1.6666667em;margin-top:1.8666667em;margin-bottom:1.0666667em;line-height:1.3333333}.xl\:prose-lg h3{font-size:1.3333333em;margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.xl\:prose-lg h4{margin-top:1.7777778em;margin-bottom:.4444444em;line-height:1.5555556}.xl\:prose-lg figure,.xl\:prose-lg img,.xl\:prose-lg video{margin-top:1.7777778em;margin-bottom:1.7777778em}.xl\:prose-lg figure>*{margin-top:0;margin-bottom:0}.xl\:prose-lg figure figcaption{font-size:.8888889em;line-height:1.5;margin-top:1em}.xl\:prose-lg code{font-size:.8888889em}.xl\:prose-lg h2 code{font-size:.8666667em}.xl\:prose-lg h3 code{font-size:.875em}.xl\:prose-lg pre{font-size:.8888889em;line-height:1.75;margin-top:2em;margin-bottom:2em;border-radius:.375rem;padding:1em 1.5em}.xl\:prose-lg ol,.xl\:prose-lg ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.xl\:prose-lg li{margin-top:.6666667em;margin-bottom:.6666667em}.xl\:prose-lg ol>li{padding-left:1.6666667em}.xl\:prose-lg ol>li:before{left:0}.xl\:prose-lg ul>li{padding-left:1.6666667em}.xl\:prose-lg ul>li:before{width:.3333333em;height:.3333333em;top:.72222em;left:.2222222em}.xl\:prose-lg>ul>li p{margin-top:.8888889em;margin-bottom:.8888889em}.xl\:prose-lg>ul>li>:first-child{margin-top:1.3333333em}.xl\:prose-lg>ul>li>:last-child{margin-bottom:1.3333333em}.xl\:prose-lg>ol>li>:first-child{margin-top:1.3333333em}.xl\:prose-lg>ol>li>:last-child{margin-bottom:1.3333333em}.xl\:prose-lg ol ol,.xl\:prose-lg ol ul,.xl\:prose-lg ul ol,.xl\:prose-lg ul ul{margin-top:.8888889em;margin-bottom:.8888889em}.xl\:prose-lg hr{margin-top:3.1111111em;margin-bottom:3.1111111em}.xl\:prose-lg hr+*{margin-top:0}.xl\:prose-lg h2+*{margin-top:0}.xl\:prose-lg h3+*{margin-top:0}.xl\:prose-lg h4+*{margin-top:0}.xl\:prose-lg table{font-size:.8888889em;line-height:1.5}.xl\:prose-lg thead th{padding-right:.75em;padding-bottom:.75em;padding-left:.75em}.xl\:prose-lg thead th:first-child{padding-left:0}.xl\:prose-lg thead th:last-child{padding-right:0}.xl\:prose-lg tbody td{padding:.75em}.xl\:prose-lg tbody td:first-child{padding-left:0}.xl\:prose-lg tbody td:last-child{padding-right:0}.xl\:prose-lg>:first-child{margin-top:0}.xl\:prose-lg>:last-child{margin-bottom:0}.xl\:prose-xl{font-size:1.25rem;line-height:1.8}.xl\:prose-xl p{margin-top:1.2em;margin-bottom:1.2em}.xl\:prose-xl [class~=lead]{font-size:1.2em;line-height:1.5;margin-top:1em;margin-bottom:1em}.xl\:prose-xl blockquote{margin-top:1.6em;margin-bottom:1.6em;padding-left:1.0666667em}.xl\:prose-xl h1{font-size:2.8em;margin-top:0;margin-bottom:.8571429em;line-height:1}.xl\:prose-xl h2{font-size:1.8em;margin-top:1.5555556em;margin-bottom:.8888889em;line-height:1.1111111}.xl\:prose-xl h3{font-size:1.5em;margin-top:1.6em;margin-bottom:.6666667em;line-height:1.3333333}.xl\:prose-xl h4{margin-top:1.8em;margin-bottom:.6em;line-height:1.6}.xl\:prose-xl figure,.xl\:prose-xl img,.xl\:prose-xl video{margin-top:2em;margin-bottom:2em}.xl\:prose-xl figure>*{margin-top:0;margin-bottom:0}.xl\:prose-xl figure figcaption{font-size:.9em;line-height:1.5555556;margin-top:1em}.xl\:prose-xl code{font-size:.9em}.xl\:prose-xl h2 code{font-size:.8611111em}.xl\:prose-xl h3 code{font-size:.9em}.xl\:prose-xl pre{font-size:.9em;line-height:1.7777778;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.1111111em 1.3333333em}.xl\:prose-xl ol,.xl\:prose-xl ul{margin-top:1.2em;margin-bottom:1.2em}.xl\:prose-xl li{margin-top:.6em;margin-bottom:.6em}.xl\:prose-xl ol>li{padding-left:1.8em}.xl\:prose-xl ol>li:before{left:0}.xl\:prose-xl ul>li{padding-left:1.8em}.xl\:prose-xl ul>li:before{width:.35em;height:.35em;top:.725em;left:.25em}.xl\:prose-xl>ul>li p{margin-top:.8em;margin-bottom:.8em}.xl\:prose-xl>ul>li>:first-child{margin-top:1.2em}.xl\:prose-xl>ul>li>:last-child{margin-bottom:1.2em}.xl\:prose-xl>ol>li>:first-child{margin-top:1.2em}.xl\:prose-xl>ol>li>:last-child{margin-bottom:1.2em}.xl\:prose-xl ol ol,.xl\:prose-xl ol ul,.xl\:prose-xl ul ol,.xl\:prose-xl ul ul{margin-top:.8em;margin-bottom:.8em}.xl\:prose-xl hr{margin-top:2.8em;margin-bottom:2.8em}.xl\:prose-xl hr+*{margin-top:0}.xl\:prose-xl h2+*{margin-top:0}.xl\:prose-xl h3+*{margin-top:0}.xl\:prose-xl h4+*{margin-top:0}.xl\:prose-xl table{font-size:.9em;line-height:1.5555556}.xl\:prose-xl thead th{padding-right:.6666667em;padding-bottom:.8888889em;padding-left:.6666667em}.xl\:prose-xl thead th:first-child{padding-left:0}.xl\:prose-xl thead th:last-child{padding-right:0}.xl\:prose-xl tbody td{padding:.8888889em .6666667em}.xl\:prose-xl tbody td:first-child{padding-left:0}.xl\:prose-xl tbody td:last-child{padding-right:0}.xl\:prose-xl>:first-child{margin-top:0}.xl\:prose-xl>:last-child{margin-bottom:0}.xl\:prose-2xl{font-size:1.5rem;line-height:1.6666667}.xl\:prose-2xl p{margin-top:1.3333333em;margin-bottom:1.3333333em}.xl\:prose-2xl [class~=lead]{font-size:1.25em;line-height:1.4666667;margin-top:1.0666667em;margin-bottom:1.0666667em}.xl\:prose-2xl blockquote{margin-top:1.7777778em;margin-bottom:1.7777778em;padding-left:1.1111111em}.xl\:prose-2xl h1{font-size:2.6666667em;margin-top:0;margin-bottom:.875em;line-height:1}.xl\:prose-2xl h2{font-size:2em;margin-top:1.5em;margin-bottom:.8333333em;line-height:1.0833333}.xl\:prose-2xl h3{font-size:1.5em;margin-top:1.5555556em;margin-bottom:.6666667em;line-height:1.2222222}.xl\:prose-2xl h4{margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.xl\:prose-2xl figure,.xl\:prose-2xl img,.xl\:prose-2xl video{margin-top:2em;margin-bottom:2em}.xl\:prose-2xl figure>*{margin-top:0;margin-bottom:0}.xl\:prose-2xl figure figcaption{font-size:.8333333em;line-height:1.6;margin-top:1em}.xl\:prose-2xl code{font-size:.8333333em}.xl\:prose-2xl h2 code{font-size:.875em}.xl\:prose-2xl h3 code{font-size:.8888889em}.xl\:prose-2xl pre{font-size:.8333333em;line-height:1.8;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.2em 1.6em}.xl\:prose-2xl ol,.xl\:prose-2xl ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.xl\:prose-2xl li{margin-top:.5em;margin-bottom:.5em}.xl\:prose-2xl ol>li{padding-left:1.6666667em}.xl\:prose-2xl ol>li:before{left:0}.xl\:prose-2xl ul>li{padding-left:1.6666667em}.xl\:prose-2xl ul>li:before{width:.3333333em;height:.3333333em;top:.66667em;left:.25em}.xl\:prose-2xl>ul>li p{margin-top:.8333333em;margin-bottom:.8333333em}.xl\:prose-2xl>ul>li>:first-child{margin-top:1.3333333em}.xl\:prose-2xl>ul>li>:last-child{margin-bottom:1.3333333em}.xl\:prose-2xl>ol>li>:first-child{margin-top:1.3333333em}.xl\:prose-2xl>ol>li>:last-child{margin-bottom:1.3333333em}.xl\:prose-2xl ol ol,.xl\:prose-2xl ol ul,.xl\:prose-2xl ul ol,.xl\:prose-2xl ul ul{margin-top:.6666667em;margin-bottom:.6666667em}.xl\:prose-2xl hr{margin-top:3em;margin-bottom:3em}.xl\:prose-2xl hr+*{margin-top:0}.xl\:prose-2xl h2+*{margin-top:0}.xl\:prose-2xl h3+*{margin-top:0}.xl\:prose-2xl h4+*{margin-top:0}.xl\:prose-2xl table{font-size:.8333333em;line-height:1.4}.xl\:prose-2xl thead th{padding-right:.6em;padding-bottom:.8em;padding-left:.6em}.xl\:prose-2xl thead th:first-child{padding-left:0}.xl\:prose-2xl thead th:last-child{padding-right:0}.xl\:prose-2xl tbody td{padding:.8em .6em}.xl\:prose-2xl tbody td:first-child{padding-left:0}.xl\:prose-2xl tbody td:last-child{padding-right:0}.xl\:prose-2xl>:first-child{margin-top:0}.xl\:prose-2xl>:last-child{margin-bottom:0}.xl\:prose-dark{color:#e2e8f0}.xl\:prose-dark blockquote{color:#a0aec0}.xl\:prose-dark h1,.xl\:prose-dark h2,.xl\:prose-dark h3,.xl\:prose-dark h4,.xl\:prose-dark h5,.xl\:prose-dark h6{color:#e2e8f0}.xl\:prose-dark figcaption{color:#a0aec0}.xl\:prose-dark thead{color:#e2e8f0}}@media (prefers-color-scheme:dark){.dark\:container{width:100%}@media (min-width:640px){.dark\:container{max-width:640px}}@media (min-width:768px){.dark\:container{max-width:768px}}@media (min-width:1024px){.dark\:container{max-width:1024px}}@media (min-width:1280px){.dark\:container{max-width:1280px}}.dark\:prose{color:#4a5568;max-width:65ch;font-size:1rem;line-height:1.75}.dark\:prose [class~=lead]{color:#4a5568;font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.dark\:prose a{color:#9b2c2c;text-decoration:none}.dark\:prose strong{color:#1a202c;font-weight:600}.dark\:prose ol{counter-reset:list-counter;margin-top:1.25em;margin-bottom:1.25em}.dark\:prose ol>li{position:relative;counter-increment:list-counter;padding-left:1.75em}.dark\:prose ol>li:before{content:counter(list-counter) ".";position:absolute;font-weight:400;color:#718096}.dark\:prose ul>li{position:relative;padding-left:1.75em}.dark\:prose ul>li:before{content:"";position:absolute;background-color:#cbd5e0;border-radius:50%;width:.375em;height:.375em;top:.6875em;left:.25em}.dark\:prose hr{border-color:#e2e8f0;border-top-width:1px;margin-top:3em;margin-bottom:3em}.dark\:prose blockquote{font-weight:500;font-style:italic;color:#1a202c;border-left-width:.25rem;border-left-color:#9f7aea;quotes:"\201C""\201D""\2018""\2019";margin-top:1.6em;margin-bottom:1.6em;padding-left:1em}.dark\:prose blockquote p:first-of-type:before{content:open-quote}.dark\:prose blockquote p:last-of-type:after{content:close-quote}.dark\:prose h1{color:#1a202c;font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.dark\:prose h2{color:#1a202c;font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.dark\:prose h3{color:#1a202c;font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.dark\:prose h4{color:#1a202c;font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.dark\:prose figure figcaption{color:#718096;font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.dark\:prose code{font-size:.875em}.dark\:prose pre{overflow-x:auto;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:.375rem;padding:.8571429em 1.1428571em}.dark\:prose pre code{border-width:0;border-radius:0;padding:0;font-weight:400}.dark\:prose table{width:100%;table-layout:auto;text-align:left;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857}.dark\:prose thead{color:#1a202c;font-weight:600;border-bottom-width:1px;border-bottom-color:#cbd5e0}.dark\:prose thead th{vertical-align:bottom;padding-right:.5714286em;padding-bottom:.5714286em;padding-left:.5714286em}.dark\:prose tbody tr{border-bottom-width:1px;border-bottom-color:#e2e8f0}.dark\:prose tbody tr:last-child{border-bottom-width:0}.dark\:prose tbody td{vertical-align:top;padding:.5714286em}.dark\:prose p{margin-top:1.25em;margin-bottom:1.25em}.dark\:prose figure,.dark\:prose img,.dark\:prose video{margin-top:2em;margin-bottom:2em}.dark\:prose figure>*{margin-top:0;margin-bottom:0}.dark\:prose h2 code{font-size:.875em}.dark\:prose h3 code{font-size:.9em}.dark\:prose ul{margin-top:1.25em;margin-bottom:1.25em}.dark\:prose li{margin-top:.5em;margin-bottom:.5em}.dark\:prose ol>li:before{left:0}.dark\:prose>ul>li p{margin-top:.75em;margin-bottom:.75em}.dark\:prose>ul>li>:first-child{margin-top:1.25em}.dark\:prose>ul>li>:last-child{margin-bottom:1.25em}.dark\:prose>ol>li>:first-child{margin-top:1.25em}.dark\:prose>ol>li>:last-child{margin-bottom:1.25em}.dark\:prose ol ol,.dark\:prose ol ul,.dark\:prose ul ol,.dark\:prose ul ul{margin-top:.75em;margin-bottom:.75em}.dark\:prose hr+*{margin-top:0}.dark\:prose h2+*{margin-top:0}.dark\:prose h3+*{margin-top:0}.dark\:prose h4+*{margin-top:0}.dark\:prose thead th:first-child{padding-left:0}.dark\:prose thead th:last-child{padding-right:0}.dark\:prose tbody td:first-child{padding-left:0}.dark\:prose tbody td:last-child{padding-right:0}.dark\:prose>:first-child{margin-top:0}.dark\:prose>:last-child{margin-bottom:0}.dark\:prose-sm{font-size:.875rem;line-height:1.7142857}.dark\:prose-sm p{margin-top:1.1428571em;margin-bottom:1.1428571em}.dark\:prose-sm [class~=lead]{font-size:1.2857143em;line-height:1.5555556;margin-top:.8888889em;margin-bottom:.8888889em}.dark\:prose-sm blockquote{margin-top:1.3333333em;margin-bottom:1.3333333em;padding-left:1.1111111em}.dark\:prose-sm h1{font-size:2.1428571em;margin-top:0;margin-bottom:.8em;line-height:1.2}.dark\:prose-sm h2{font-size:1.4285714em;margin-top:1.6em;margin-bottom:.8em;line-height:1.4}.dark\:prose-sm h3{font-size:1.2857143em;margin-top:1.5555556em;margin-bottom:.4444444em;line-height:1.5555556}.dark\:prose-sm h4{margin-top:1.4285714em;margin-bottom:.5714286em;line-height:1.4285714}.dark\:prose-sm figure,.dark\:prose-sm img,.dark\:prose-sm video{margin-top:1.7142857em;margin-bottom:1.7142857em}.dark\:prose-sm figure>*{margin-top:0;margin-bottom:0}.dark\:prose-sm figure figcaption{font-size:.8571429em;line-height:1.3333333;margin-top:.6666667em}.dark\:prose-sm code{font-size:.8571429em}.dark\:prose-sm h2 code{font-size:.9em}.dark\:prose-sm h3 code{font-size:.8888889em}.dark\:prose-sm pre{font-size:.8571429em;line-height:1.6666667;margin-top:1.6666667em;margin-bottom:1.6666667em;border-radius:.25rem;padding:.6666667em 1em}.dark\:prose-sm ol,.dark\:prose-sm ul{margin-top:1.1428571em;margin-bottom:1.1428571em}.dark\:prose-sm li{margin-top:.2857143em;margin-bottom:.2857143em}.dark\:prose-sm ol>li{padding-left:1.5714286em}.dark\:prose-sm ol>li:before{left:0}.dark\:prose-sm ul>li{padding-left:1.5714286em}.dark\:prose-sm ul>li:before{height:.3571429em;width:.3571429em;top:.67857em;left:.2142857em}.dark\:prose-sm>ul>li p{margin-top:.5714286em;margin-bottom:.5714286em}.dark\:prose-sm>ul>li>:first-child{margin-top:1.1428571em}.dark\:prose-sm>ul>li>:last-child{margin-bottom:1.1428571em}.dark\:prose-sm>ol>li>:first-child{margin-top:1.1428571em}.dark\:prose-sm>ol>li>:last-child{margin-bottom:1.1428571em}.dark\:prose-sm ol ol,.dark\:prose-sm ol ul,.dark\:prose-sm ul ol,.dark\:prose-sm ul ul{margin-top:.5714286em;margin-bottom:.5714286em}.dark\:prose-sm hr{margin-top:2.8571429em;margin-bottom:2.8571429em}.dark\:prose-sm hr+*{margin-top:0}.dark\:prose-sm h2+*{margin-top:0}.dark\:prose-sm h3+*{margin-top:0}.dark\:prose-sm h4+*{margin-top:0}.dark\:prose-sm table{font-size:.8571429em;line-height:1.5}.dark\:prose-sm thead th{padding-right:1em;padding-bottom:.6666667em;padding-left:1em}.dark\:prose-sm thead th:first-child{padding-left:0}.dark\:prose-sm thead th:last-child{padding-right:0}.dark\:prose-sm tbody td{padding:.6666667em 1em}.dark\:prose-sm tbody td:first-child{padding-left:0}.dark\:prose-sm tbody td:last-child{padding-right:0}.dark\:prose-sm>:first-child{margin-top:0}.dark\:prose-sm>:last-child{margin-bottom:0}.dark\:prose-lg{font-size:1.125rem;line-height:1.7777778}.dark\:prose-lg p{margin-top:1.3333333em;margin-bottom:1.3333333em}.dark\:prose-lg [class~=lead]{font-size:1.2222222em;line-height:1.4545455;margin-top:1.0909091em;margin-bottom:1.0909091em}.dark\:prose-lg blockquote{margin-top:1.6666667em;margin-bottom:1.6666667em;padding-left:1em}.dark\:prose-lg h1{font-size:2.6666667em;margin-top:0;margin-bottom:.8333333em;line-height:1}.dark\:prose-lg h2{font-size:1.6666667em;margin-top:1.8666667em;margin-bottom:1.0666667em;line-height:1.3333333}.dark\:prose-lg h3{font-size:1.3333333em;margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.dark\:prose-lg h4{margin-top:1.7777778em;margin-bottom:.4444444em;line-height:1.5555556}.dark\:prose-lg figure,.dark\:prose-lg img,.dark\:prose-lg video{margin-top:1.7777778em;margin-bottom:1.7777778em}.dark\:prose-lg figure>*{margin-top:0;margin-bottom:0}.dark\:prose-lg figure figcaption{font-size:.8888889em;line-height:1.5;margin-top:1em}.dark\:prose-lg code{font-size:.8888889em}.dark\:prose-lg h2 code{font-size:.8666667em}.dark\:prose-lg h3 code{font-size:.875em}.dark\:prose-lg pre{font-size:.8888889em;line-height:1.75;margin-top:2em;margin-bottom:2em;border-radius:.375rem;padding:1em 1.5em}.dark\:prose-lg ol,.dark\:prose-lg ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.dark\:prose-lg li{margin-top:.6666667em;margin-bottom:.6666667em}.dark\:prose-lg ol>li{padding-left:1.6666667em}.dark\:prose-lg ol>li:before{left:0}.dark\:prose-lg ul>li{padding-left:1.6666667em}.dark\:prose-lg ul>li:before{width:.3333333em;height:.3333333em;top:.72222em;left:.2222222em}.dark\:prose-lg>ul>li p{margin-top:.8888889em;margin-bottom:.8888889em}.dark\:prose-lg>ul>li>:first-child{margin-top:1.3333333em}.dark\:prose-lg>ul>li>:last-child{margin-bottom:1.3333333em}.dark\:prose-lg>ol>li>:first-child{margin-top:1.3333333em}.dark\:prose-lg>ol>li>:last-child{margin-bottom:1.3333333em}.dark\:prose-lg ol ol,.dark\:prose-lg ol ul,.dark\:prose-lg ul ol,.dark\:prose-lg ul ul{margin-top:.8888889em;margin-bottom:.8888889em}.dark\:prose-lg hr{margin-top:3.1111111em;margin-bottom:3.1111111em}.dark\:prose-lg hr+*{margin-top:0}.dark\:prose-lg h2+*{margin-top:0}.dark\:prose-lg h3+*{margin-top:0}.dark\:prose-lg h4+*{margin-top:0}.dark\:prose-lg table{font-size:.8888889em;line-height:1.5}.dark\:prose-lg thead th{padding-right:.75em;padding-bottom:.75em;padding-left:.75em}.dark\:prose-lg thead th:first-child{padding-left:0}.dark\:prose-lg thead th:last-child{padding-right:0}.dark\:prose-lg tbody td{padding:.75em}.dark\:prose-lg tbody td:first-child{padding-left:0}.dark\:prose-lg tbody td:last-child{padding-right:0}.dark\:prose-lg>:first-child{margin-top:0}.dark\:prose-lg>:last-child{margin-bottom:0}.dark\:prose-xl{font-size:1.25rem;line-height:1.8}.dark\:prose-xl p{margin-top:1.2em;margin-bottom:1.2em}.dark\:prose-xl [class~=lead]{font-size:1.2em;line-height:1.5;margin-top:1em;margin-bottom:1em}.dark\:prose-xl blockquote{margin-top:1.6em;margin-bottom:1.6em;padding-left:1.0666667em}.dark\:prose-xl h1{font-size:2.8em;margin-top:0;margin-bottom:.8571429em;line-height:1}.dark\:prose-xl h2{font-size:1.8em;margin-top:1.5555556em;margin-bottom:.8888889em;line-height:1.1111111}.dark\:prose-xl h3{font-size:1.5em;margin-top:1.6em;margin-bottom:.6666667em;line-height:1.3333333}.dark\:prose-xl h4{margin-top:1.8em;margin-bottom:.6em;line-height:1.6}.dark\:prose-xl figure,.dark\:prose-xl img,.dark\:prose-xl video{margin-top:2em;margin-bottom:2em}.dark\:prose-xl figure>*{margin-top:0;margin-bottom:0}.dark\:prose-xl figure figcaption{font-size:.9em;line-height:1.5555556;margin-top:1em}.dark\:prose-xl code{font-size:.9em}.dark\:prose-xl h2 code{font-size:.8611111em}.dark\:prose-xl h3 code{font-size:.9em}.dark\:prose-xl pre{font-size:.9em;line-height:1.7777778;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.1111111em 1.3333333em}.dark\:prose-xl ol,.dark\:prose-xl ul{margin-top:1.2em;margin-bottom:1.2em}.dark\:prose-xl li{margin-top:.6em;margin-bottom:.6em}.dark\:prose-xl ol>li{padding-left:1.8em}.dark\:prose-xl ol>li:before{left:0}.dark\:prose-xl ul>li{padding-left:1.8em}.dark\:prose-xl ul>li:before{width:.35em;height:.35em;top:.725em;left:.25em}.dark\:prose-xl>ul>li p{margin-top:.8em;margin-bottom:.8em}.dark\:prose-xl>ul>li>:first-child{margin-top:1.2em}.dark\:prose-xl>ul>li>:last-child{margin-bottom:1.2em}.dark\:prose-xl>ol>li>:first-child{margin-top:1.2em}.dark\:prose-xl>ol>li>:last-child{margin-bottom:1.2em}.dark\:prose-xl ol ol,.dark\:prose-xl ol ul,.dark\:prose-xl ul ol,.dark\:prose-xl ul ul{margin-top:.8em;margin-bottom:.8em}.dark\:prose-xl hr{margin-top:2.8em;margin-bottom:2.8em}.dark\:prose-xl hr+*{margin-top:0}.dark\:prose-xl h2+*{margin-top:0}.dark\:prose-xl h3+*{margin-top:0}.dark\:prose-xl h4+*{margin-top:0}.dark\:prose-xl table{font-size:.9em;line-height:1.5555556}.dark\:prose-xl thead th{padding-right:.6666667em;padding-bottom:.8888889em;padding-left:.6666667em}.dark\:prose-xl thead th:first-child{padding-left:0}.dark\:prose-xl thead th:last-child{padding-right:0}.dark\:prose-xl tbody td{padding:.8888889em .6666667em}.dark\:prose-xl tbody td:first-child{padding-left:0}.dark\:prose-xl tbody td:last-child{padding-right:0}.dark\:prose-xl>:first-child{margin-top:0}.dark\:prose-xl>:last-child{margin-bottom:0}.dark\:prose-2xl{font-size:1.5rem;line-height:1.6666667}.dark\:prose-2xl p{margin-top:1.3333333em;margin-bottom:1.3333333em}.dark\:prose-2xl [class~=lead]{font-size:1.25em;line-height:1.4666667;margin-top:1.0666667em;margin-bottom:1.0666667em}.dark\:prose-2xl blockquote{margin-top:1.7777778em;margin-bottom:1.7777778em;padding-left:1.1111111em}.dark\:prose-2xl h1{font-size:2.6666667em;margin-top:0;margin-bottom:.875em;line-height:1}.dark\:prose-2xl h2{font-size:2em;margin-top:1.5em;margin-bottom:.8333333em;line-height:1.0833333}.dark\:prose-2xl h3{font-size:1.5em;margin-top:1.5555556em;margin-bottom:.6666667em;line-height:1.2222222}.dark\:prose-2xl h4{margin-top:1.6666667em;margin-bottom:.6666667em;line-height:1.5}.dark\:prose-2xl figure,.dark\:prose-2xl img,.dark\:prose-2xl video{margin-top:2em;margin-bottom:2em}.dark\:prose-2xl figure>*{margin-top:0;margin-bottom:0}.dark\:prose-2xl figure figcaption{font-size:.8333333em;line-height:1.6;margin-top:1em}.dark\:prose-2xl code{font-size:.8333333em}.dark\:prose-2xl h2 code{font-size:.875em}.dark\:prose-2xl h3 code{font-size:.8888889em}.dark\:prose-2xl pre{font-size:.8333333em;line-height:1.8;margin-top:2em;margin-bottom:2em;border-radius:.5rem;padding:1.2em 1.6em}.dark\:prose-2xl ol,.dark\:prose-2xl ul{margin-top:1.3333333em;margin-bottom:1.3333333em}.dark\:prose-2xl li{margin-top:.5em;margin-bottom:.5em}.dark\:prose-2xl ol>li{padding-left:1.6666667em}.dark\:prose-2xl ol>li:before{left:0}.dark\:prose-2xl ul>li{padding-left:1.6666667em}.dark\:prose-2xl ul>li:before{width:.3333333em;height:.3333333em;top:.66667em;left:.25em}.dark\:prose-2xl>ul>li p{margin-top:.8333333em;margin-bottom:.8333333em}.dark\:prose-2xl>ul>li>:first-child{margin-top:1.3333333em}.dark\:prose-2xl>ul>li>:last-child{margin-bottom:1.3333333em}.dark\:prose-2xl>ol>li>:first-child{margin-top:1.3333333em}.dark\:prose-2xl>ol>li>:last-child{margin-bottom:1.3333333em}.dark\:prose-2xl ol ol,.dark\:prose-2xl ol ul,.dark\:prose-2xl ul ol,.dark\:prose-2xl ul ul{margin-top:.6666667em;margin-bottom:.6666667em}.dark\:prose-2xl hr{margin-top:3em;margin-bottom:3em}.dark\:prose-2xl hr+*{margin-top:0}.dark\:prose-2xl h2+*{margin-top:0}.dark\:prose-2xl h3+*{margin-top:0}.dark\:prose-2xl h4+*{margin-top:0}.dark\:prose-2xl table{font-size:.8333333em;line-height:1.4}.dark\:prose-2xl thead th{padding-right:.6em;padding-bottom:.8em;padding-left:.6em}.dark\:prose-2xl thead th:first-child{padding-left:0}.dark\:prose-2xl thead th:last-child{padding-right:0}.dark\:prose-2xl tbody td{padding:.8em .6em}.dark\:prose-2xl tbody td:first-child{padding-left:0}.dark\:prose-2xl tbody td:last-child{padding-right:0}.dark\:prose-2xl>:first-child{margin-top:0}.dark\:prose-2xl>:last-child{margin-bottom:0}.dark\:prose-dark{color:#e2e8f0}.dark\:prose-dark blockquote{color:#a0aec0}.dark\:prose-dark h1,.dark\:prose-dark h2,.dark\:prose-dark h3,.dark\:prose-dark h4,.dark\:prose-dark h5,.dark\:prose-dark h6{color:#e2e8f0}.dark\:prose-dark figcaption{color:#a0aec0}.dark\:prose-dark thead{color:#e2e8f0}}.grvsc-container{overflow:auto;position:relative;-webkit-overflow-scrolling:touch;padding-top:1rem;padding-top:var(--grvsc-padding-top,var(--grvsc-padding-v,1rem));padding-bottom:1rem;padding-bottom:var(--grvsc-padding-bottom,var(--grvsc-padding-v,1rem));border-radius:8px;border-radius:var(--grvsc-border-radius,8px);-webkit-font-feature-settings:normal;font-feature-settings:normal;line-height:1.4}.grvsc-code{display:table}.grvsc-line{display:table-row;-webkit-box-sizing:border-box;box-sizing:border-box;width:100%;position:relative}.grvsc-line>*{position:relative}.grvsc-gutter-pad{display:table-cell;padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem))/2)}.grvsc-gutter{display:table-cell;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.grvsc-gutter:before{content:attr(data-content)}.grvsc-source{display:table-cell;padding-left:1.5rem;padding-left:var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem));padding-right:1.5rem;padding-right:var(--grvsc-padding-right,var(--grvsc-padding-h,1.5rem))}.grvsc-source:empty:after{content:" ";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.grvsc-gutter+.grvsc-source{padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem))/2)}.grvsc-has-line-highlighting>.grvsc-code>.grvsc-line:before{content:" ";position:absolute;width:100%}.grvsc-line-diff-add:before{background-color:rgba(0,255,60,.2);background-color:var(--grvsc-line-diff-add-background-color,rgba(0,255,60,.2))}.grvsc-line-diff-del:before{background-color:rgba(255,0,20,.2);background-color:var(--grvsc-line-diff-del-background-color,rgba(255,0,20,.2))}.grvsc-line-number{padding:0 2px;text-align:right;opacity:.7}</style><meta name="generator" content="Gatsby 2.20.9"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><script>
  
  
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-9152758-1', 'auto', {});
      
      
      
      
      
      }</script><link rel="alternate" type="application/rss+xml" title="David Bernheisel&#x27;s Blog RSS Feed" href="/rss.xml"/><link rel="icon" href="/android-chrome-36x36.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="36x36" href="/android-chrome-36x36.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="48x48" href="/android-chrome-48x48.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="72x72" href="/android-chrome-72x72.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="96x96" href="/android-chrome-96x96.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="144x144" href="/android-chrome-144x144.png?v=611230f76b9c00b58e5b99e8a179a99d"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png?v=611230f76b9c00b58e5b99e8a179a99d"/><title data-react-helmet="true">HTTPoison and Decompression | David Bernheisel</title><meta data-react-helmet="true" name="description" content="Did you know that Rubys
Net::HTTP
class automatically decompresses responses? It handles a lot of use cases that
we dont have to remember"/><meta data-react-helmet="true" name="twitter:creator" content="@bernheisel"/><link as="script" rel="preload" href="/styles-48fa8a050a65bb8447bd.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-a335978f44dd7d899268.js"/><link as="script" rel="preload" href="/1777bc0a756dace6068a54d243c7071eee1627a0-c8bbedbe2105888d6327.js"/><link as="script" rel="preload" href="/framework-1cbcc4f69858806ac5db.js"/><link as="script" rel="preload" href="/app-e49f8733b8aee9471acf.js"/><link as="script" rel="preload" href="/webpack-runtime-82e231a808ed9bf59c72.js"/><link as="fetch" rel="preload" href="/page-data/blog/httpoison-decompression/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><nav class="flex flex-wrap items-center justify-between p-4 shadow-md navbar"><a class="no-underline" href="/"><div class="flex items-center space-x-1"><div class="flex-shrink-0"><img src="/static/profile-picture-977b63cbce04bae4479e3185b22bfb1a.jpg" alt="David Bernheisel" class="w-16 avatar md:w-24 lg:w-32"/></div><div><h3 class="ml-0 text-xl font-bold md:ml-4 md:text-4xl md:font-extrabold leading-6">David Bernheisel</h3></div></div></a><div class="block lg:hidden"><button class="flex items-center px-3 button"><svg class="w-3 h-3 fill-current" viewBox="0 0 20 20"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path></svg></button></div><div class="w-full block lg:mt-0 mt-4 lg:flex lg:items-center lg:w-auto hidden"><a class="no-underline block lg:inline-block mt-4 mr-4 lg:mt-0 button" href="/">Blog</a><a class="no-underline block lg:inline-block mt-4 mr-4 lg:mt-0 button" href="/projects/">Projects</a><a class="block mt-4 mr-4 button lg:inline-block lg:mt-0" href="https://elixir-utilities.herokuapp.com">Utilities</a><a class="block mt-4 mr-4 button lg:inline-block lg:mt-0" href="https://twitter.com/bernheisel">Twitter</a><div class="py-1 mt-4 lg:mt-0"><a href="/rss.xml"><img class="h-8 align-middle" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgICAgaWQ9IlJTU2ljb24iCiAgICAgdmlld0JveD0iMCAwIDggOCIgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyNTYiPgoKICA8dGl0bGU+UlNTIGZlZWQgaWNvbjwvdGl0bGU+CgogIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+CiAgICAuYnV0dG9uIHtzdHJva2U6IG5vbmU7IGZpbGw6IG9yYW5nZTt9CiAgICAuc3ltYm9sIHtzdHJva2U6IG5vbmU7IGZpbGw6IHdoaXRlO30KICA8L3N0eWxlPgoKICA8cmVjdCAgIGNsYXNzPSJidXR0b24iIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIHJ4PSIxLjUiIC8+CiAgPGNpcmNsZSBjbGFzcz0ic3ltYm9sIiBjeD0iMiIgY3k9IjYiIHI9IjEiIC8+CiAgPHBhdGggICBjbGFzcz0ic3ltYm9sIiBkPSJtIDEsNCBhIDMsMyAwIDAgMSAzLDMgaCAxIGEgNCw0IDAgMCAwIC00LC00IHoiIC8+CiAgPHBhdGggICBjbGFzcz0ic3ltYm9sIiBkPSJtIDEsMiBhIDUsNSAwIDAgMSA1LDUgaCAxIGEgNiw2IDAgMCAwIC02LC02IHoiIC8+Cgo8L3N2Zz4=" alt="RSS"/></a></div></div></nav><main class="max-w-3xl p-4 m-auto text-lg"><article class="blog-post"><h1 class="post-content font-extrabold text-4xl">HTTPoison and Decompression</h1><p class="mt-2 mb-4 text-sm frontmatter"><span>Published on <!-- -->June 01, 2019</span><span><span class="mx-2">|</span>11<!-- -->m read</span></p><div class="post-content dark:prose-dark prose lg:prose-xl"><p>Did you know that Rubys
<a href="https://ruby-doc.org/stdlib-2.6.3/libdoc/net/http/rdoc/Net/HTTP.html#class-Net::HTTP-label-Compression">Net::HTTP</a>
class automatically decompresses responses? It handles a lot of use cases that
we dont have to remember ourselves. Its built into Ruby!</p>
<p>When I came across a JSON API service that was returning binary, I was a bit
puzzled; what is this binary? Im supposed to be getting text back and,
its not consistent either: sometimes I get text <em>on the same exact request</em> a
minute later. Baffling.</p>
<p>On top of that, I was using <a href="https://github.com/parroty/exvcr">ExVCR</a> in some tests which serializes the
request/response chain into JSON. ExVCR takes binary responses, encodes it into
Erlang Term format, then Base64 encodes that, and then puts <em>that</em> in the JSON
file it writes; and does all that in reverse when its replaying the cassette
when the tests run.</p>
<p>Ive seen text before on this endpoint, and now Im getting binary
sometimes; and wait-a-second, dont HTTP clients decompress responses? Im
pretty sure I didnt worry about this with Rubys Net::HTTP or HTTParty.</p>
<p>Turns out, in the Elixir ecosystem, HTTPoison along with other common HTTP
clients like HTTPotion, the new Mint, Gun, and probably others dont do this
automatically.</p>
<h2>Lets back up</h2>
<p>HTTP requests and responses have some headers that tell the client/server what
format of content were looking for. The ones we care about here is
<b><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding">Accept-Encoding</a></b> and <b><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Encoding">Content-Encoding</a></b>. Theres another one
thats related called <b><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type">Content-Type</a></b>, but thats not exactly about
compression, but well get to this one later.</p>
<p>Accept-Encoding is what the client will use to say YO SERVER! I need some of
this resource, and I can handle it compressed with <a href="https://github.com/google/brotli">brotli</a></p>
<p>Content-Encoding is what the server will respond with, as in Oh hay Client!
Nice to see you; heres your content as requested. I even compressed it in
brotli</p>
<p>What <em>REALLY</em> happens (in my experience), is that Accept-Encoding is ignored,
and <strong>the servers gonna give whatever it wants to you</strong>. To complicate it more,
there are layers between the client and server that may compress data and modify
headers (or not). So, the server might have sent plaintext and provided a
Content-Encoding of <code>identity</code> or not a Content-Encoding at all (both of these
mean there is no compression.), but a load balancer, router, CDN, whatever,
might have compressed the body of data on the way back from the server to the
client.</p>
<p>So whats the client to do? It has to guess. This is probably why some clients
dont automatically decompress data for you.</p>
<p>Here are some of the options for <code>Content-Encoding</code>:</p>
<table>
<thead>
<tr>
<th>value</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gzip</code></td>
<td>Compressed with Lempel-Ziv (LZ77). On desktops, this is a <code>.gz</code> file</td>
</tr>
<tr>
<td><code>x-gzip</code></td>
<td>Same as above, just an older expression</td>
</tr>
<tr>
<td><code>compress</code></td>
<td>Compressed with Lempel-Ziv-Welch (LZW)</td>
</tr>
<tr>
<td><code>deflate</code></td>
<td>Compressed with zlib. On desktops, this is a normal <code>.zip</code> file</td>
</tr>
<tr>
<td><code>br</code></td>
<td>Compressed with brotli.</td>
</tr>
<tr>
<td><code>identity</code></td>
<td>No compression</td>
</tr>
<tr>
<td>(missing)</td>
<td>No compression</td>
</tr>
</tbody>
</table>
<p>As an interesting sidenote, Phoenix supports compression into Brotli, but
otherwise theres not yet built-in support for decompressing Brotli in
Erlang/Elixir. Theres also no built-in support for LZW, but thats ok because
its not as good or popular as the other formats. The only built-ins for Erlang
and Elixir are <code>gzip</code> and <code>deflate</code> so thats what Ill support on this first
iteration.</p>
<h2>HTTPoison</h2>
<p>In Elixir, the most popular HTTP client is <a href="https://github.com/edgurgel/httpoison">HTTPoison</a> according to <a href="https://hex.pm/packages">hex.pm</a>.
Actually, let me clarify: HTTPoison itself doesnt do any HTTP requests itself;
what I mean is its a wrapper for the Erlang HTTP client called <a href="https://github.com/benoitc/hackney">hackney</a> which
actually does the HTTP requests, and HTTPoison wraps around that to make the API
a bit friendlier for Elixir.</p>
<p>Let me re-word that for my use-case: Im making a wrapper for a wrapper.</p>
<p>Im not the first to notice that it doesnt decompress responses automatically.
Theres been an <a href="https://github.com/edgurgel/httpoison/issues/81">issue</a> open
since 2015 for them to auto-decompress, but the author has decided, (me
paraphrasing), Im not going to do it, but hackney is so well get to benefit
from it soon enough!, and <em>that</em>
<a href="https://github.com/benoitc/hackney/issues/155">issue</a> has been open for a since
Jan 2015. Were still waiting. Its June 2019. 4.5 years.</p>
<p>Ok, cool, but I need to handle this now, and it doesnt seem like theres
movement in the popular library of choice.</p>
<h2>Its a little unfair</h2>
<p>Its unfair for me to suggest these libraries should absolutely support
decompression out of the box, because these clients are really powerful. They
also support streaming which complicates decompression. But, for simple JSON
request/responses and for most APIs, were not streaming.</p>
<p>Major props for these libraries making my life easier; my issue is that I didnt
know about these concepts before diving in, and through an issue I learned
about HTTP decompression.</p>
<p><img src="/3b9749e92576dae35e059a75d733a18d/til.gif" alt="TIL"></p>
<h2>One more problem: Character Encoding</h2>
<p>I am also working with an API service that responds with characters encoded in
ISO-8859-1 sometimes; not in UTF-8. In Elixir, strings are UTF-8 so I need to
make sure I can convert those characters to something readable for my logs, and
ultimately the clients. This character encoding is indicated in the HTTP header
<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type">Content-Type</a>, paired with the format of content, like JSON or XML. Its going
to look something like <code>text/plain;charset=utf-8</code> or
<code>application/json;charset=ISO-8859-1</code>.</p>
<h2>Lets do it</h2>
<p>Lets stick with HTTPoison out of pure laziness. If youre implementing from
scratch, Id recommend you to look at <a href="https://github.com/ericmj/mint">Mint</a> first because it has no
dependencies and has a better philosophy with OTP, which is a <em>good thing</em>.
<a href="https://github.com/teamon/tesla">Tesla</a> is also a good HTTP client to consider.</p>
<p>Let me re-word that again: Im going to write a wrapper (MyApp.HTTPClient) for a
wrapper (HTTPoison) of hackney for a wrapper (my layer that covers the 3rd party
API) of a 3rd party service. Exciting.</p>
<p>Also please know that my project also includes Phoenix and Plug, so you might
see some helpers in the tests and implementation. If youre not using Phoenix or
Plug, it should be pretty easy to replace these functions with your own.</p>
<h2>My interface</h2>
<p>Its going to be exactly like HTTPoisons. Creative, I know. But, this way I can
replace any usage of <code>HTTPoison.get</code> or <code>HTTPoison.post</code> with my own
<code>HttpClient.get</code> or <code>HttpClient.post</code>. Easy peasy.</p>
<p>Im also going to give room for dependency-injection so I can test this easily.
And, maybe one day I wont want to use HTTPoison anymore, so this new interface
might also help transition my app to another HTTP client without disrupting too
much.</p>
<p>Lets write tests first:</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyApp.HttpClientTest</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">use</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyApp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">DataCase</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">async:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">true</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">import</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">ExUnit</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">CaptureLog</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">alias</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">MyApp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">require</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># I used Erlang&#39;s :zlib.gzip(&quot;Hello&quot;)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@gzipped_response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;&lt;</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">31</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">139</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">8</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">3</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">243</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">72</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">205</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">201</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">201</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">7</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">130</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">137</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">209</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">247</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">5</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&gt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># I used Erlang&#39;s :zlib.zip(&quot;Hello&quot;)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@zipped_response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;&lt;</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">243</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">72</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">205</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">201</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">201</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">7</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">0</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&gt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@decoded</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Hello&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  describe </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;get&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;decompresses a gzipped body&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@gzipped_response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Encoding&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;gzip&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@decoded</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;decompresses a gzipped body with x-gzip header&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@gzipped_response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Encoding&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;x-gzip&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@decoded</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;does not attempt to decompress a plain body with gzip header&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      body </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Hallo&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> body,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Encoding&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;gzip&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> ^body}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;decompresses a zipped body&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@zipped_response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Encoding&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;deflate&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@decoded</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;emits log when encountering unsupported compression&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Hallo&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Encoding&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;br&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert capture_log(</span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=~</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;No support for decompression of body using &#39;br&#39; algorithm&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;emits log when failing to decompress&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;&lt;</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">1</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">2</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">3</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&gt;&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Encoding&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;deflate&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert capture_log(</span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=~</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Failed to decompress response&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;re-encodes a latin1 body to UTF-8&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      latin1 </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;&lt;</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">163</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">233</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">100</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">117</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">102</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">102</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&gt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      utf8 </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;duff&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> latin1,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Type&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;text/plain;charset=ISO-8859-1&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> ^utf8}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;does not re-encode utf8 bodies&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      utf8 </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;duff&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> utf8,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Type&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;text/plain;charset=utf-8&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> ^utf8}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;emits log when encountering unknown encoding&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Hallo&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Type&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;text/plain;charset=duurf&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert capture_log(</span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=~</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Need to implement re-encoding support for: duurf&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;emits log when failing to reencode&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      body </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;&lt;</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">163</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">233</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">100</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">117</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">102</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">102</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">833</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">::</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">3</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&gt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> body,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Content-Type&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;text/plain;charset=ISO-8859-1&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert capture_log(</span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=~</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Failed to re-encode response&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    test </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;does not re-encode un-specified bodies&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      body </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;duff&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;&lt;</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">163</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">233</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">100</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">117</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">102</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">102</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&gt;&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      requester </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">{</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> body,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">          </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> []</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        }}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      assert {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> ^body}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, [], </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">requester:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> requester)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># copy/paste above, but adjust it for the post/4 function. Or, if you</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># want to be creative, make a macro to generate these tests for you.</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<p>Cool. Thats a lot of tests.</p>
<p>Lets make those tests pass:</p>
<pre class="grvsc-container atom-one-light grvsc-mm-t88nfI" data-language="elixir" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defmodule</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-4 grvsc-t88nfI-1">MyApp.HTTPClient</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">@moduledoc &quot;&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">  A wrapper around HTTPoison that takes care of post-processing depending on the response, namely:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">    1) decompress the response if gzipped</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">    2) re-encode the body into UTF-8 if ISO-8859-1</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">  &quot;&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@default_getter</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">&amp;HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.get</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">/</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">3</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@default_poster</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">&amp;HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.post</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">/</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">4</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@default_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> [</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">timeout:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">300_000</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">recv_timeout:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">60_000</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">]</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-7">require</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Logger</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">@doc &quot;&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">  GET a URL with headers. Supported options:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">    requester: fn(url, headers, request_options)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">  &quot;&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@spec</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> get(</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">String</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.t(), </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.headers(), list()) </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">::</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.t()} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:error</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Error</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.t()}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">get</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">request_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">\\</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> []) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    opts </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> request_options </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">++</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@default_options</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    {get, opts} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Keyword</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.pop(opts, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:requester</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@default_getter</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    url</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> get.(headers, opts)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> process_response</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">@doc &quot;&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">  POST a URL with a body, headers. Supported options:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">    requester: fn(url, body, headers, request_options)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">  &quot;&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@spec</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> post(</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">String</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.t(), </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.body(), </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.headers(), list()) </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">::</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.t()} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:error</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">HTTPoison</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Error</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.t()}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">def</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">post</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">url</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">request_options</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">\\</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> []) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    opts </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> request_options </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">++</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@default_options</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    {post, opts} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Keyword</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.pop(opts, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:requester</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">@default_poster</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    url</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> post.(body, headers, opts)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> process_response</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">process_response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    response</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> decompress_response</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> reencode_response_to_utf8</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">({</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:error</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:error</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, response}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">({</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">status</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">try</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      decompressed_body </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        headers</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> find_header(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;content-encoding&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> decompress_body(body)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      {status, %{response </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> decompressed_body}}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">rescue</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Logger</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.error(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Failed to decompress response: </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">#{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">inspect response</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">}</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {status, response}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">reencode_response_to_utf8</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">({</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:error</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:error</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, response}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">reencode_response_to_utf8</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">({</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">status</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">headers:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">response</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">}) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">try</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      reencoded_body </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        headers</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> find_header(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;content-type&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> parse_charset()</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> reencode_body(body)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      {status, %{response </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">|</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">body:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> reencoded_body}}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">rescue</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Logger</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.error(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Failed to re-encode response: </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">#{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">inspect response</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">}</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        {status, response}</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">find_header</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">headers</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">header_name</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Enum</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.find_value(</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      headers,</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">fn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> {name, value} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        name </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=~</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-6">~r/</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">#{</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-6">header_name</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">}</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-6">/i</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&amp;&amp;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">String</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.downcase(value)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    )</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># gzip&#39;s magic header is 0x1F 0x8B, with the 3rd byte specifying the compression method, 0x08</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># meaning &quot;deflate&quot;. More info https://en.wikipedia.org/wiki/Gzip</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> body</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;identity&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> body</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;gzip&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;&lt;</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">31</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">139</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">8</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">::</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">binary</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&gt;&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:zlib</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.gunzip(body)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;gzip&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> body</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;x-gzip&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;&lt;</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">31</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">139</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">8</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">::</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">binary</span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&gt;&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:zlib</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.gunzip(body)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;x-gzip&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> body</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;deflate&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:zlib</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.unzip(body)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">decompress_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">other</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Logger</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.error(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;No support for decompression of body using &#39;</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">#{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">other</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">}</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&#39; algorithm.&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    body</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">parse_charset</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">parse_charset</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">content_type</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">with</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:ok</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, %{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;charset&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> charset}} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">&lt;-</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Plug</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Conn</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.</span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Utils</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.content_type(content_type) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">cond</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        charset </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=~</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-6">~r/utf-?8/</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:utf8</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        charset </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">=~</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-6">~r/iso-?8859-?1/</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:latin1</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">true</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> charset</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">else</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3">_</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># When the header isn&#39;t sent, the RFC spec says we should assume ISO-8859-1, but the default is</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># actually different per format, eg, XML should be assumed UTF-8. We&#39;re going to not re-encode</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-7 grvsc-t5WxC3-i grvsc-t88nfI-3"># if it&#39;s not sent and assume UTF-8. This should be safe for most cases.</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">reencode_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-4">nil</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> body</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">reencode_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:utf8</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">), </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">do:</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> body</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">reencode_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:latin1</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">case</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:unicode</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.characters_to_binary(body, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:latin1</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:utf8</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:error</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, binary, rest} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Logger</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.error(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Failed to re-encode text. BODY: </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">#{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">inspect binary</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">}</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6"> REST: </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">#{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">inspect rest</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">}</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        body</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      {</span><span class="grvsc-t5WxC3-8 grvsc-t88nfI-4">:incomplete</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, reencoded_text, rest} </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Logger</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.warn(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Failed to re-encode entire text. Dropping characters: </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">#{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">inspect rest</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">}</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        reencoded_text</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">      reencoded_text </span><span class="grvsc-t5WxC3-6 grvsc-t88nfI-7">-&gt;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">        reencoded_text</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">defp</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1"> </span><span class="grvsc-t5WxC3-9 grvsc-t88nfI-5">reencode_body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">(</span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">other</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">, </span><span class="grvsc-t5WxC3-6 grvsc-t5WxC3-i grvsc-t88nfI-1">body</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">) </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">do</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    </span><span class="grvsc-t5WxC3-5 grvsc-t88nfI-1">Logger</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">.error(</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;Need to implement re-encoding support for: </span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">#{</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">other</span><span class="grvsc-t5WxC3-15 grvsc-t88nfI-6">}</span><span class="grvsc-t5WxC3-10 grvsc-t88nfI-6">&quot;</span><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">)</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">    body</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-1 grvsc-t88nfI-1">  </span><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="grvsc-t5WxC3-14 grvsc-t88nfI-7">end</span></span></span></code></pre>
<h2>and Done!</h2>
<p>Hope this helps. Hit me up at <a href="https://twitter.com/bernheisel">@bernheisel</a> if I
missed anything or you have another cool idea.</p>
<p>Im not really interested in pulling this into a library, because thats exactly
what we dont need: yet another HTTP client. But, if you found yourself needing
to decompress responses with HTTPoison, then this will be a good start.</p>
<p>Youll notice that this doesnt implement all the calls (were missing the ones
like <code>delete</code> and <code>head</code>), nor is it the smartest way to solve the problem. Ill
leave the gaps to inspire you.</p>
<h2>Or use <a href="https://github.com/teamon/tesla">Tesla</a></h2>
<p>Tesla supports decompression out of the box; so if you started on that HTTP
client, you probably didnt have to worry about any of this :)</p>
<style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line > * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: ' ';
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {
    content: ' ';
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .atom-one-light {
    background-color: #FAFAFA;
    color: #383A42;
  }
  .atom-one-light .grvsc-t5WxC3-i { font-style: italic; }
  .atom-one-light .grvsc-t5WxC3-14 { color: #A626A4; }
  .atom-one-light .grvsc-t5WxC3-1 { color: #383A42; }
  .atom-one-light .grvsc-t5WxC3-4 { color: #C18401; }
  .atom-one-light .grvsc-t5WxC3-9 { color: #4078F2; }
  .atom-one-light .grvsc-t5WxC3-5 { color: #E45649; }
  .atom-one-light .grvsc-t5WxC3-8 { color: #0184BC; }
  .atom-one-light .grvsc-t5WxC3-7 { color: #A0A1A7; }
  .atom-one-light .grvsc-t5WxC3-6 { color: #986801; }
  .atom-one-light .grvsc-t5WxC3-10 { color: #50A14F; }
  .atom-one-light .grvsc-t5WxC3-15 { color: #CA1243; }
  .atom-one-light .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));
  }
  
  /* Monokai Phoenix */
  @media (prefers-color-scheme: dark) {
    .grvsc-mm-t88nfI {
      background-color: #1e1e1e;
      color: #F8F8F2;
    }
    .grvsc-mm-t88nfI .grvsc-t88nfI-7 { color: #F92672; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-1 { color: #F8F8F2; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-4 { color: #AE81FF; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-3 { color: #75715E; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-6 { color: #E6DB74; }
    .grvsc-mm-t88nfI .grvsc-t88nfI-5 { color: #A6E22E; }
    .grvsc-mm-t88nfI .grvsc-line-highlighted::before {
      background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
      box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
    }
  }
</style></div></article><div class="flex flex-wrap justify-between"><div class="w-full p-2 lg:w-1/2"><a class="no-underline inline-flex items-center flex-1 dark:button-dark button" href="/blog/ruby-rails-and-circle-ci-workflows/"><svg class="w-6 h-6 mr-2 fill-current" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1408 960v-128q0-26-19-45t-45-19h-502l189-189q19-19 19-45t-19-45l-91-91q-18-18-45-18t-45 18l-362 362-91 91q-18 18-18 45t18 45l91 91 362 362q18 18 45 18t45-18l91-91q18-18 18-45t-18-45l-189-189h502q26 0 45-19t19-45zm256-64q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"></path></svg><span>Ruby, Rails, and CircleCI 2.0 Workflows</span></a></div><div class="w-full p-2 lg:w-1/2"><a class="no-underline inline-flex items-center flex-1 dark:button-dark button" href="/blog/vim-workflow/"><span>VIM Testing and Workflow</span><svg class="w-6 h-6 ml-2 fill-current" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1413 896q0-27-18-45l-91-91-362-362q-18-18-45-18t-45 18l-91 91q-18 18-18 45t18 45l189 189h-502q-26 0-45 19t-19 45v128q0 26 19 45t45 19h502l-189 189q-19 19-19 45t19 45l91 91q18 18 45 18t45-18l362-362 91-91q18-18 18-45zm251 0q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"></path></svg></a></div></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/httpoison-decompression/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-e49f8733b8aee9471acf.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-8dc5b1de7df84c955e11.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-a335978f44dd7d899268.js"],"component---src-pages-404-js":["/component---src-pages-404-js-f9633554493dddb1c536.js"],"component---src-pages-index-js":["/component---src-pages-index-js-f71e923739c6685c4443.js"],"component---src-pages-projects-js":["/component---src-pages-projects-js-f429883c2208f057e721.js"]};/*]]>*/</script><script src="/webpack-runtime-82e231a808ed9bf59c72.js" async=""></script><script src="/app-e49f8733b8aee9471acf.js" async=""></script><script src="/framework-1cbcc4f69858806ac5db.js" async=""></script><script src="/1777bc0a756dace6068a54d243c7071eee1627a0-c8bbedbe2105888d6327.js" async=""></script><script src="/component---src-templates-blog-post-js-a335978f44dd7d899268.js" async=""></script><script src="/styles-48fa8a050a65bb8447bd.js" async=""></script></body></html>